import{g as f,a as o,i as a,t as g,u as H}from"./web-BBvT38jz.js";import{n as R}from"./main.modern-OqqPJ8ov.js";import{H as B}from"./header-CpONEogC.js";import{u as D,c as L,e as M,g as O}from"./config-context-D6eWdJPs.js";import{C as U}from"./collection-form-ugOwBI3M.js";import{S as W}from"./showWhenResource-Ctav80qn.js";import{h as q,j as z,i as A}from"./sparkstone-logo-full-CMRMyzg4.js";import{b as c}from"./solid-B45ZUGaf.js";var G=g('<form><header class="flex flip"><h2 style=margin:0>New <!$><!/></h2><div style=flex-grow:1></div><button>Publish</button></header><hr><!$><!/>'),I=g("<main class=container><!$><!/><hr><!$><!/>");function te(J){const[l]=D(),u=q(),_=z();A();const t=()=>l()?.collections?.[u.collection],{formSubmit:h,errors:p,validate:b}=R();async function d(e){const n=Object.fromEntries(new FormData(e).entries()),r=L(t(),n);let s=M(t(),n);await fetch(`${O(l())}/storage/file/${r}`,{method:"put",body:s}),e.reset(),_(`/admin?collection=${t().name}`)}return(()=>{var e=f(I),n=e.firstChild,[r,s]=o(n.nextSibling),x=r.nextSibling,S=x.nextSibling,[C,v]=o(S.nextSibling);return a(e,c(B,{}),r,s),a(e,c(W,{resources:[l],get children(){var i=f(G),m=i.firstChild,$=m.firstChild,y=$.firstChild,w=y.nextSibling,[E,P]=o(w.nextSibling),N=m.nextSibling,j=N.nextSibling,[k,F]=o(j.nextSibling);return H(h,i,()=>d),a($,()=>t()?.label,E,P),a(i,c(U,{get collection(){return t()},errors:p,validate:b}),k,F),i}}),C,v),e})()}export{te as default};
