import{g as f,a as o,i as a,t as g,u as R}from"./web-D4Sjcv9r.js";import{n as j,C as B}from"./collection-form-D0wMS2ZG.js";import{H as D}from"./header-CFXEC0Xl.js";import{u as L,c as M,e as O,g as U}from"./config-context-RfAPyplx.js";import{S as W}from"./showWhenResource-ZDhNv2nG.js";import{u as q,i as z,h as A}from"./sparkstone-logo-full-Cf9JLMKG.js";import{b as c}from"./solid-DLBwXPei.js";import"./handlebars-C7IZMBRA.js";var G=g('<form><header class="flex flip"><h2 style=margin:0>New <!$><!/></h2><div style=flex-grow:1></div><button>Publish</button></header><hr><!$><!/>'),I=g("<main class=container><!$><!/><hr><!$><!/>");function te(J){const[l]=L(),u=q(),_=z();A();const t=()=>l()?.collections?.[u.collection],{formSubmit:h,errors:p,validate:b}=j();async function d(e){const n=Object.fromEntries(new FormData(e).entries()),i=M(t(),n);let s=O(t(),n);await fetch(`${U(l())}/storage/file/${i}`,{method:"put",body:s}),e.reset(),_(`/admin?collection=${t().name}`)}return(()=>{var e=f(I),n=e.firstChild,[i,s]=o(n.nextSibling),x=i.nextSibling,S=x.nextSibling,[C,v]=o(S.nextSibling);return a(e,c(D,{}),i,s),a(e,c(W,{resources:[l],get children(){var r=f(G),m=r.firstChild,$=m.firstChild,y=$.firstChild,w=y.nextSibling,[E,P]=o(w.nextSibling),N=m.nextSibling,k=N.nextSibling,[F,H]=o(k.nextSibling);return R(h,r,()=>d),a($,()=>t()?.label,E,P),a(r,c(B,{get collection(){return t()},errors:p,validate:b}),F,H),r}}),C,v),e})()}export{te as default};
