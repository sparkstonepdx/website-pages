import{g as o,a as d,i as l,r as p,t as c,d as F,c as O}from"./web-DdXaRKi1.js";import{q,b as r,t as L,F as x,k as W}from"./solid-CBRdhu3b.js";import{H as z}from"./header-D7s3FHGc.js";import{S as v}from"./showWhenResource-CK_b83oJ.js";import{u as B}from"./config-context-Bt3Lq7ah.js";import{j as D,i as G,A as I}from"./sparkstone-logo-full-CFxgyvuN.js";var J=c("<article class=card>"),K=c('<main class=container><!$><!/><hr><div class="flex flip"><button disabled class=ghost href=/admin>Collections</button><button class=ghost>Media</button><div style=flex-grow:1></div><button>Create <!$><!/></button></div><hr><!$><!/>'),Q=c("<button class=ghost>"),T=c("<ul>"),U=c("<li>");function le($){const[e]=B(),n=D(),[t,i]=G(),u=()=>e()?.collections?.[t.collection];return q(()=>{!t.collection&&e()?.collections&&i({collection:Object.keys(e()?.collections)[0]})}),(()=>{var a=o(K),S=a.firstChild,[_,C]=d(S.nextSibling),k=_.nextSibling,h=k.nextSibling,y=h.firstChild,f=y.nextSibling,P=f.nextSibling,m=P.nextSibling,j=m.firstChild,E=j.nextSibling,[w,H]=d(E.nextSibling),M=h.nextSibling,N=M.nextSibling,[R,A]=d(N.nextSibling);return l(a,r(z,{}),_,C),f.$$click=()=>n("/admin/media"),m.$$click=()=>n(`/admin/collections/${u()?.name}/new-entry`),l(m,()=>u()?.name,w,H),l(a,r(v,{resources:[e],get children(){return[(()=>{var b=o(J);return l(b,r(x,{get each(){return Object.values(e().collections)},children:g=>(()=>{var s=o(Q);return s.$$click=()=>i({collection:g.name}),l(s,()=>g.label),W(()=>O(s,"disabled",g.name===t.collection)),p(),s})()})),b})(),r(V,{get collection(){return u()},get config(){return e()}})]}}),R,A),p(),a})()}function V($){const[e]=L(()=>$.collection,async n=>fetch(`http://localhost:4050/storage/ls/${n.folder}`).then(t=>t.json()));return r(v,{resources:[e],get children(){var n=o(T);return l(n,r(x,{get each(){return e()},children:t=>(()=>{var i=o(U);return l(i,r(I,{get href(){return`collections/${$.collection.name}/entries/${t.name}`},get children(){return t.name}})),i})()})),n}})}F(["click"]);export{V as CollectionList,le as default};
