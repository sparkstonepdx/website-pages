import{g as f,a as o,i as a,t as g,u as R}from"./web-D4Sjcv9r.js";import{n as j}from"./main.modern-eBdi_iJh.js";import{H as B}from"./header-CFXEC0Xl.js";import{u as D,c as L,e as M,g as O}from"./config-context-BhfqCUrO.js";import{C as U}from"./collection-form-BfN5e_0c.js";import{S as W}from"./showWhenResource-ZDhNv2nG.js";import{u as q,i as z,h as A}from"./sparkstone-logo-full-Cf9JLMKG.js";import{b as c}from"./solid-DLBwXPei.js";var G=g('<form><header class="flex flip"><h2 style=margin:0>New <!$><!/></h2><div style=flex-grow:1></div><button>Publish</button></header><hr><!$><!/>'),I=g("<main class=container><!$><!/><hr><!$><!/>");function te(J){const[l]=D(),u=q(),_=z();A();const t=()=>l()?.collections?.[u.collection],{formSubmit:h,errors:p,validate:b}=j();async function d(e){const n=Object.fromEntries(new FormData(e).entries()),r=L(t(),n);let s=M(t(),n);await fetch(`${O(l())}/storage/file/${r}`,{method:"put",body:s}),e.reset(),_(`/admin?collection=${t().name}`)}return(()=>{var e=f(I),n=e.firstChild,[r,s]=o(n.nextSibling),x=r.nextSibling,S=x.nextSibling,[C,v]=o(S.nextSibling);return a(e,c(B,{}),r,s),a(e,c(W,{resources:[l],get children(){var i=f(G),m=i.firstChild,$=m.firstChild,y=$.firstChild,w=y.nextSibling,[E,P]=o(w.nextSibling),N=m.nextSibling,k=N.nextSibling,[F,H]=o(k.nextSibling);return R(h,i,()=>d),a($,()=>t()?.label,E,P),a(i,c(U,{get collection(){return t()},errors:p,validate:b}),F,H),i}}),C,v),e})()}export{te as default};
