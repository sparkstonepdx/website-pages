import{g as u,a,i as l,t as d,u as B}from"./web-D4Sjcv9r.js";import{n as D,C as L}from"./collection-form-D0wMS2ZG.js";import{r as M,b as c}from"./solid-DLBwXPei.js";import{H as O}from"./header-CFXEC0Xl.js";import{u as U,g,p as W,e as q}from"./config-context-RfAPyplx.js";import{S as z}from"./showWhenResource-ZDhNv2nG.js";import{u as A,h as G,i as I}from"./sparkstone-logo-full-Cf9JLMKG.js";import"./handlebars-C7IZMBRA.js";var J=d('<form><header class="flex flip"><h2 style=margin:0>Editing <!$><!/></h2><div style=flex-grow:1></div><button>Publish</button></header><hr><!$><!/>'),K=d("<main class=container><!$><!/><hr><!$><!/>");function re(Q){const[i]=U(),s=A();G();const r=()=>i()?.collections?.[s.collection],{formSubmit:h,errors:_,validate:p}=D(),b=I(),[m]=M(()=>({entry:s.entry,collection:r()}),async({entry:e,collection:n})=>{if(n)return await fetch(`${g(i())}/storage/file/${n?.folder}${e}`).then(t=>t.text()).then(t=>W(n,t))});async function x(e){const n=Object.fromEntries(new FormData(e).entries()),t=await q(r(),n);await fetch(`${g(i())}/storage/file/${r()?.folder}/${s.entry}`,{method:"put",body:t}),e.reset(),b(`/admin?collection=${r().name}`)}return(()=>{var e=u(K),n=e.firstChild,[t,S]=a(n.nextSibling),y=t.nextSibling,C=y.nextSibling,[v,w]=a(C.nextSibling);return l(e,c(O,{}),t,S),l(e,c(z,{resources:[i,m],get children(){var o=u(J),$=o.firstChild,f=$.firstChild,E=f.firstChild,P=E.nextSibling,[N,R]=a(P.nextSibling),k=$.nextSibling,F=k.nextSibling,[H,j]=a(F.nextSibling);return B(h,o,()=>x),l(f,()=>r()?.label,N,R),l(o,c(L,{get collection(){return r()},get defaults(){return m()},errors:_,validate:p}),H,j),o}}),v,w),e})()}export{re as default};
