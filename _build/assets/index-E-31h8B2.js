import{g as s,a as h,i as l,r as x,t as c,d as O,c as q}from"./web-BBvT38jz.js";import{q as L,t as v,b as r,F as S,k as W}from"./solid-B45ZUGaf.js";import{H as z}from"./header-CpONEogC.js";import{S as C}from"./showWhenResource-Ctav80qn.js";import{u as B}from"./config-context-D6eWdJPs.js";import{j as D,i as G,A as I}from"./sparkstone-logo-full-CMRMyzg4.js";var J=c("<article class=card>"),K=c('<main class=container><!$><!/><hr><div class="flex flip"><button disabled class=ghost href=/admin>Collections</button><button class=ghost>Media</button><div style=flex-grow:1></div><button>Create <!$><!/></button></div><hr><!$><!/>'),Q=c("<button class=ghost>"),T=c("<ul>"),U=c("<li>");function re($){const[e]=B(),n=D(),[t,o]=G(),u=()=>e()?.collections?.[t.collection];L(()=>{!t.collection&&e()?.collections&&o({collection:Object.keys(e()?.collections)[0]})});const[X]=v(e,i=>fetch(`http://localhost:4050/storage/ls${i.media_folder}`).then(m=>m.json()));return(()=>{var i=s(K),m=i.firstChild,[_,k]=h(m.nextSibling),y=_.nextSibling,f=y.nextSibling,j=f.firstChild,b=j.nextSibling,P=b.nextSibling,g=P.nextSibling,E=g.firstChild,w=E.nextSibling,[F,H]=h(w.nextSibling),M=f.nextSibling,N=M.nextSibling,[R,A]=h(N.nextSibling);return l(i,r(z,{}),_,k),b.$$click=()=>n("/admin/media"),g.$$click=()=>n(`/admin/collections/${u()?.name}/new-entry`),l(g,()=>u()?.name,F,H),l(i,r(C,{resources:[e],get children(){return[(()=>{var p=s(J);return l(p,r(S,{get each(){return Object.values(e().collections)},children:d=>(()=>{var a=s(Q);return a.$$click=()=>o({collection:d.name}),l(a,()=>d.label),W(()=>q(a,"disabled",d.name===t.collection)),x(),a})()})),p})(),r(V,{get collection(){return u()},get config(){return e()}})]}}),R,A),x(),i})()}function V($){const[e]=v(()=>$.collection,async n=>fetch(`http://localhost:4050/storage/ls/${n.folder}`).then(t=>t.json()));return r(C,{resources:[e],get children(){var n=s(T);return l(n,r(S,{get each(){return e()},children:t=>(()=>{var o=s(U);return l(o,r(I,{get href(){return`collections/${$.collection.name}/entries/${t}`},children:t})),o})()})),n}})}O(["click"]);export{V as CollectionList,re as default};
