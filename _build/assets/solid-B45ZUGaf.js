const d={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return de(this.context.count)},getNextContextId(){return de(this.context.count++)}};function de(e){const t=String(e),r=t.length-1;return d.context.id+(r?String.fromCharCode(96+r):"")+t}function R(e){d.context=e}function Ve(){return{...d.context,id:d.getNextContextId(),count:0}}const be=!1,Te=(e,t)=>e===t,Q=Symbol("solid-proxy"),xe=typeof Proxy=="function",Ne=Symbol("solid-track"),J={equals:Te};let K=null,Se=Ee;const N=1,z=2,me={owned:null,cleanups:null,context:null,owner:null},se={};var a=null;let l=null,Fe=null,p=null,O=null,x=null,te=0;function Y(e,t){const r=p,n=a,s=e.length===0,i=t===void 0?n:t,u=s?me:{owned:null,cleanups:null,context:i?i.context:null,owner:i},o=s?e:()=>e(()=>A(()=>$(u)));a=u,p=null;try{return I(o,!0)}finally{p=r,a=n}}function D(e,t){t=t?Object.assign({},J,t):J;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=s=>(typeof s=="function"&&(l&&l.running&&l.sources.has(r)?s=s(r.tValue):s=s(r.value)),Ae(r,s));return[Oe.bind(r),n]}function he(e,t,r){const n=B(e,t,!0,N);_(n)}function Re(e,t,r){const n=B(e,t,!1,N);_(n)}function De(e,t,r){Se=ze;const n=B(e,t,!1,N),s=U&&fe(U);s&&(n.suspense=s),n.user=!0,x?x.push(n):_(n)}function m(e,t,r){r=r?Object.assign({},J,r):J;const n=B(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,_(n),Oe.bind(n)}function Le(e){return e&&typeof e=="object"&&"then"in e}function Me(e,t,r){let n,s,i;typeof t=="function"?(n=e,s=t,i=r||{}):(n=!0,s=e,i=t||{});let u=null,o=se,c=null,g=!1,h=!1,f="initialValue"in i,E=typeof n=="function"&&m(n);const y=new Set,[v,S]=(i.storage||D)(i.initialValue),[j,V]=D(void 0),[k,P]=D(void 0,{equals:!1}),[T,L]=D(f?"ready":"unresolved");d.context&&(c=d.getNextContextId(),i.ssrLoadFrom==="initial"?o=i.initialValue:d.load&&d.has(c)&&(o=d.load(c)));function M(w,b,F,C){return u===w&&(u=null,C!==void 0&&(f=!0),(w===o||b===o)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(C,{value:b})),o=se,l&&w&&g?(l.promises.delete(w),g=!1,I(()=>{l.running=!0,ce(b,F)},!1)):ce(b,F)),b}function ce(w,b){I(()=>{b===void 0&&S(()=>w),L(b!==void 0?"errored":f?"ready":"unresolved"),V(b);for(const F of y.keys())F.decrement();y.clear()},!1)}function ne(){const w=U&&fe(U),b=v(),F=j();if(F!==void 0&&!u)throw F;return p&&!p.user&&w&&he(()=>{k(),u&&(w.resolved&&l&&g?l.promises.add(u):y.has(w)||(w.increment(),y.add(w)))}),b}function re(w=!0){if(w!==!1&&h)return;h=!1;const b=E?E():n;if(g=l&&l.running,b==null||b===!1){M(u,A(v));return}l&&u&&l.promises.delete(u);let F;const C=o!==se?o:A(()=>{try{return s(b,{value:v(),refetching:w})}catch(H){F=H}});if(F!==void 0){M(u,void 0,G(F),b);return}else if(!Le(C))return M(u,C,void 0,b),C;return u=C,"v"in C?(C.s===1?M(u,C.v,void 0,b):M(u,void 0,G(C.v),b),C):(h=!0,queueMicrotask(()=>h=!1),I(()=>{L(f?"refreshing":"pending"),P()},!1),C.then(H=>M(C,H,void 0,b),H=>M(C,void 0,G(H),b)))}Object.defineProperties(ne,{state:{get:()=>T()},error:{get:()=>j()},loading:{get(){const w=T();return w==="pending"||w==="refreshing"}},latest:{get(){if(!f)return ne();const w=j();if(w&&!u)throw w;return v()}}});let ae=a;return E?he(()=>(ae=a,re(!1))):re(!1),[ne,{refetch:w=>qe(ae,()=>re(w)),mutate:S}]}function Ze(e){return I(e,!1)}function A(e){if(p===null)return e();const t=p;p=null;try{return e()}finally{p=t}}function et(e,t,r){const n=Array.isArray(e);let s,i=r&&r.defer;return u=>{let o;if(n){o=Array(e.length);for(let g=0;g<e.length;g++)o[g]=e[g]()}else o=e();if(i)return i=!1,u;const c=A(()=>t(o,s,u));return s=o,c}}function tt(e){De(()=>A(e))}function le(e){return a===null||(a.cleanups===null?a.cleanups=[e]:a.cleanups.push(e)),e}function $e(e,t){K||(K=Symbol("error")),a=B(void 0,void 0,!0),a.context={...a.context,[K]:[t]},l&&l.running&&l.sources.add(a);try{return e()}catch(r){W(r)}finally{a=a.owner}}function nt(){return p}function Ue(){return a}function qe(e,t){const r=a,n=p;a=e,p=null;try{return I(t,!0)}catch(s){W(s)}finally{a=r,p=n}}function rt(e){if(l&&l.running)return e(),l.done;const t=p,r=a;return Promise.resolve().then(()=>{p=t,a=r;let n;return U&&(n=l||(l={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),n.done||(n.done=new Promise(s=>n.resolve=s)),n.running=!0),I(e,!1),p=a=null,n?n.done:void 0})}const[st,ge]=D(!1);function _e(e){x.push.apply(x,e),e.length=0}function ve(e,t){const r=Symbol("context");return{id:r,Provider:Be(r),defaultValue:e}}function fe(e){let t;return a&&a.context&&(t=a.context[e.id])!==void 0?t:e.defaultValue}function ke(e){const t=m(e),r=m(()=>ue(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}let U;function He(){return U||(U=ve())}function Oe(){const e=l&&l.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===N)_(this);else{const t=O;O=null,I(()=>ee(this),!1),O=t}if(p){const t=this.observers?this.observers.length:0;p.sources?(p.sources.push(this),p.sourceSlots.push(t)):(p.sources=[this],p.sourceSlots=[t]),this.observers?(this.observers.push(p),this.observerSlots.push(p.sources.length-1)):(this.observers=[p],this.observerSlots=[p.sources.length-1])}return e&&l.sources.has(this)?this.tValue:this.value}function Ae(e,t,r){let n=l&&l.running&&l.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(n,t)){if(l){const s=l.running;(s||!r&&l.sources.has(e))&&(l.sources.add(e),e.tValue=t),s||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&I(()=>{for(let s=0;s<e.observers.length;s+=1){const i=e.observers[s],u=l&&l.running;u&&l.disposed.has(i)||((u?!i.tState:!i.state)&&(i.pure?O.push(i):x.push(i),i.observers&&Ce(i)),u?i.tState=N:i.state=N)}if(O.length>1e6)throw O=[],new Error},!1)}return t}function _(e){if(!e.fn)return;$(e);const t=te;pe(e,l&&l.running&&l.sources.has(e)?e.tValue:e.value,t),l&&!l.running&&l.sources.has(e)&&queueMicrotask(()=>{I(()=>{l&&(l.running=!0),p=a=e,pe(e,e.tValue,t),p=a=null},!1)})}function pe(e,t,r){let n;const s=a,i=p;p=a=e;try{n=e.fn(t)}catch(u){return e.pure&&(l&&l.running?(e.tState=N,e.tOwned&&e.tOwned.forEach($),e.tOwned=void 0):(e.state=N,e.owned&&e.owned.forEach($),e.owned=null)),e.updatedAt=r+1,W(u)}finally{p=i,a=s}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?Ae(e,n,!0):l&&l.running&&e.pure?(l.sources.add(e),e.tValue=n):e.value=n,e.updatedAt=r)}function B(e,t,r,n=N,s){const i={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:a,context:a?a.context:null,pure:r};return l&&l.running&&(i.state=0,i.tState=n),a===null||a!==me&&(l&&l.running&&a.pure?a.tOwned?a.tOwned.push(i):a.tOwned=[i]:a.owned?a.owned.push(i):a.owned=[i]),i}function Z(e){const t=l&&l.running;if((t?e.tState:e.state)===0)return;if((t?e.tState:e.state)===z)return ee(e);if(e.suspense&&A(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<te);){if(t&&l.disposed.has(e))return;(t?e.tState:e.state)&&r.push(e)}for(let n=r.length-1;n>=0;n--){if(e=r[n],t){let s=e,i=r[n+1];for(;(s=s.owner)&&s!==i;)if(l.disposed.has(s))return}if((t?e.tState:e.state)===N)_(e);else if((t?e.tState:e.state)===z){const s=O;O=null,I(()=>ee(e,r[0]),!1),O=s}}}function I(e,t){if(O)return e();let r=!1;t||(O=[]),x?r=!0:x=[],te++;try{const n=e();return Ke(r),n}catch(n){r||(x=null),O=null,W(n)}}function Ke(e){if(O&&(Ee(O),O=null),e)return;let t;if(l){if(!l.promises.size&&!l.queue.size){const n=l.sources,s=l.disposed;x.push.apply(x,l.effects),t=l.resolve;for(const i of x)"tState"in i&&(i.state=i.tState),delete i.tState;l=null,I(()=>{for(const i of s)$(i);for(const i of n){if(i.value=i.tValue,i.owned)for(let u=0,o=i.owned.length;u<o;u++)$(i.owned[u]);i.tOwned&&(i.owned=i.tOwned),delete i.tValue,delete i.tOwned,i.tState=0}ge(!1)},!1)}else if(l.running){l.running=!1,l.effects.push.apply(l.effects,x),x=null,ge(!0);return}}const r=x;x=null,r.length&&I(()=>Se(r),!1),t&&t()}function Ee(e){for(let t=0;t<e.length;t++)Z(e[t])}function ze(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:Z(n)}if(d.context){if(d.count){d.effects||(d.effects=[]),d.effects.push(...e.slice(0,r));return}R()}for(d.effects&&(d.done||!d.count)&&(e=[...d.effects,...e],r+=d.effects.length,delete d.effects),t=0;t<r;t++)Z(e[t])}function ee(e,t){const r=l&&l.running;r?e.tState=0:e.state=0;for(let n=0;n<e.sources.length;n+=1){const s=e.sources[n];if(s.sources){const i=r?s.tState:s.state;i===N?s!==t&&(!s.updatedAt||s.updatedAt<te)&&Z(s):i===z&&ee(s,t)}}}function Ce(e){const t=l&&l.running;for(let r=0;r<e.observers.length;r+=1){const n=e.observers[r];(t?!n.tState:!n.state)&&(t?n.tState=z:n.state=z,n.pure?O.push(n):x.push(n),n.observers&&Ce(n))}}function $(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),s=r.observers;if(s&&s.length){const i=s.pop(),u=r.observerSlots.pop();n<s.length&&(i.sourceSlots[u]=n,s[n]=i,r.observerSlots[n]=u)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)$(e.tOwned[t]);delete e.tOwned}if(l&&l.running&&e.pure)Pe(e,!0);else if(e.owned){for(t=e.owned.length-1;t>=0;t--)$(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}l&&l.running?e.tState=0:e.state=0}function Pe(e,t){if(t||(e.tState=0,l.disposed.add(e)),e.owned)for(let r=0;r<e.owned.length;r++)Pe(e.owned[r])}function G(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function we(e,t,r){try{for(const n of t)n(e)}catch(n){W(n,r&&r.owner||null)}}function W(e,t=a){const r=K&&t&&t.context&&t.context[K],n=G(e);if(!r)throw n;x?x.push({fn(){we(n,r,t)},state:N}):we(n,r,t)}function ue(e){if(typeof e=="function"&&!e.length)return ue(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=ue(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function Be(e,t){return function(n){let s;return Re(()=>s=A(()=>(a.context={...a.context,[e]:n.value},ke(()=>n.children))),void 0),s}}const We=Symbol("fallback");function ye(e){for(let t=0;t<e.length;t++)e[t]()}function Xe(e,t,r={}){let n=[],s=[],i=[],u=0,o=t.length>1?[]:null;return le(()=>ye(i)),()=>{let c=e()||[],g=c.length,h,f;return c[Ne],A(()=>{let y,v,S,j,V,k,P,T,L;if(g===0)u!==0&&(ye(i),i=[],n=[],s=[],u=0,o&&(o=[])),r.fallback&&(n=[We],s[0]=Y(M=>(i[0]=M,r.fallback())),u=1);else if(u===0){for(s=new Array(g),f=0;f<g;f++)n[f]=c[f],s[f]=Y(E);u=g}else{for(S=new Array(g),j=new Array(g),o&&(V=new Array(g)),k=0,P=Math.min(u,g);k<P&&n[k]===c[k];k++);for(P=u-1,T=g-1;P>=k&&T>=k&&n[P]===c[T];P--,T--)S[T]=s[P],j[T]=i[P],o&&(V[T]=o[P]);for(y=new Map,v=new Array(T+1),f=T;f>=k;f--)L=c[f],h=y.get(L),v[f]=h===void 0?-1:h,y.set(L,f);for(h=k;h<=P;h++)L=n[h],f=y.get(L),f!==void 0&&f!==-1?(S[f]=s[h],j[f]=i[h],o&&(V[f]=o[h]),f=v[f],y.set(L,f)):i[h]();for(f=k;f<g;f++)f in S?(s[f]=S[f],i[f]=j[f],o&&(o[f]=V[f],o[f](f))):s[f]=Y(E);s=s.slice(0,u=g),n=c.slice(0)}return s});function E(y){if(i[f]=y,o){const[v,S]=D(f);return o[f]=S,t(c[f],v)}return t(c[f])}}}let Ie=!1;function it(){Ie=!0}function Ye(e,t){if(Ie&&d.context){const r=d.context;R(Ve());const n=A(()=>e(t||{}));return R(r),n}return A(()=>e(t||{}))}function X(){return!0}const oe={get(e,t,r){return t===Q?r:e.get(t)},has(e,t){return t===Q?!0:e.has(t)},set:X,deleteProperty:X,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:X,deleteProperty:X}},ownKeys(e){return e.keys()}};function ie(e){return(e=typeof e=="function"?e():e)?e:{}}function Ge(){for(let e=0,t=this.length;e<t;++e){const r=this[e]();if(r!==void 0)return r}}function ut(...e){let t=!1;for(let u=0;u<e.length;u++){const o=e[u];t=t||!!o&&Q in o,e[u]=typeof o=="function"?(t=!0,m(o)):o}if(xe&&t)return new Proxy({get(u){for(let o=e.length-1;o>=0;o--){const c=ie(e[o])[u];if(c!==void 0)return c}},has(u){for(let o=e.length-1;o>=0;o--)if(u in ie(e[o]))return!0;return!1},keys(){const u=[];for(let o=0;o<e.length;o++)u.push(...Object.keys(ie(e[o])));return[...new Set(u)]}},oe);const r={},n=Object.create(null);for(let u=e.length-1;u>=0;u--){const o=e[u];if(!o)continue;const c=Object.getOwnPropertyNames(o);for(let g=c.length-1;g>=0;g--){const h=c[g];if(h==="__proto__"||h==="constructor")continue;const f=Object.getOwnPropertyDescriptor(o,h);if(!n[h])n[h]=f.get?{enumerable:!0,configurable:!0,get:Ge.bind(r[h]=[f.get.bind(o)])}:f.value!==void 0?f:void 0;else{const E=r[h];E&&(f.get?E.push(f.get.bind(o)):f.value!==void 0&&E.push(()=>f.value))}}}const s={},i=Object.keys(n);for(let u=i.length-1;u>=0;u--){const o=i[u],c=n[o];c&&c.get?Object.defineProperty(s,o,c):s[o]=c?c.value:void 0}return s}function ot(e,...t){const r=t.length;if(xe&&Q in e){const s=r>1?t.flat():t[0],i=t.map(u=>new Proxy({get(o){return u.includes(o)?e[o]:void 0},has(o){return u.includes(o)&&o in e},keys(){return u.filter(o=>o in e)}},oe));return i.push(new Proxy({get(u){return s.includes(u)?void 0:e[u]},has(u){return s.includes(u)?!1:u in e},keys(){return Object.keys(e).filter(u=>!s.includes(u))}},oe)),i}const n=[];for(let s=0;s<=r;s++)n[s]={};for(const s of Object.getOwnPropertyNames(e)){let i=r;for(let c=0;c<t.length;c++)if(t[c].includes(s)){i=c;break}const u=Object.getOwnPropertyDescriptor(e,s);!u.get&&!u.set&&u.enumerable&&u.writable&&u.configurable?n[i][s]=u.value:Object.defineProperty(n[i],s,u)}return n}function lt(e){let t,r;const n=s=>{const i=d.context;if(i){const[o,c]=D();d.count||(d.count=0),d.count++,(r||(r=e())).then(g=>{!d.done&&R(i),d.count--,c(()=>g.default),R()}),t=o}else if(!t){const[o]=Me(()=>(r||(r=e())).then(c=>c.default));t=o}let u;return m(()=>(u=t())?A(()=>{if(!i||d.done)return u(s);const o=d.context;R(i);const c=u(s);return R(o),c}):"")};return n.preload=()=>r||((r=e()).then(s=>t=()=>s.default),r),n}let Qe=0;function ft(){return d.context?d.getNextContextId():`cl-${Qe++}`}const je=e=>`Stale read from <${e}>.`;function ct(e){const t="fallback"in e&&{fallback:()=>e.fallback};return m(Xe(()=>e.each,e.children,t||void 0))}function at(e){const t=e.keyed,r=m(()=>e.when,void 0,void 0),n=t?r:m(r,void 0,{equals:(s,i)=>!s==!i});return m(()=>{const s=n();if(s){const i=e.children;return typeof i=="function"&&i.length>0?A(()=>i(t?s:()=>{if(!A(n))throw je("Show");return r()})):i}return e.fallback},void 0,void 0)}function dt(e){const t=ke(()=>e.children),r=m(()=>{const n=t(),s=Array.isArray(n)?n:[n];let i=()=>{};for(let u=0;u<s.length;u++){const o=u,c=s[u],g=i,h=m(()=>g()?void 0:c.when,void 0,void 0),f=c.keyed?h:m(h,void 0,{equals:(E,y)=>!E==!y});i=()=>g()||(f()?[o,h,c]:void 0)}return i});return m(()=>{const n=r()();if(!n)return e.fallback;const[s,i,u]=n,o=u.children;return typeof o=="function"&&o.length>0?A(()=>o(u.keyed?i():()=>{if(A(r)()?.[0]!==s)throw je("Match");return i()})):o},void 0,void 0)}function ht(e){return e}let q;function gt(){q&&[...q].forEach(e=>e())}function pt(e){let t;d.context&&d.load&&(t=d.load(d.getContextId()));const[r,n]=D(t,void 0);return q||(q=new Set),q.add(n),le(()=>q.delete(n)),m(()=>{let s;if(s=r()){const i=e.fallback;return typeof i=="function"&&i.length?A(()=>i(s,()=>n())):i}return $e(()=>e.children,n)},void 0,void 0)}const Je=ve();function wt(e){let t=0,r,n,s,i,u;const[o,c]=D(!1),g=He(),h={increment:()=>{++t===1&&c(!0)},decrement:()=>{--t===0&&c(!1)},inFallback:o,effects:[],resolved:!1},f=Ue();if(d.context&&d.load){const v=d.getContextId();let S=d.load(v);if(S&&(typeof S!="object"||S.s!==1?s=S:d.gather(v)),s&&s!=="$$f"){const[j,V]=D(void 0,{equals:!1});i=j,s.then(()=>{if(d.done)return V();d.gather(v),R(n),V(),R()},k=>{u=k,V()})}}const E=fe(Je);E&&(r=E.register(h.inFallback));let y;return le(()=>y&&y()),Ye(g.Provider,{value:h,get children(){return m(()=>{if(u)throw u;if(n=d.context,i)return i(),i=void 0;n&&s==="$$f"&&R();const v=m(()=>e.children);return m(S=>{const j=h.inFallback(),{showContent:V=!0,showFallback:k=!0}=r?r():{};if((!j||s&&s!=="$$f")&&V)return h.resolved=!0,y&&y(),y=n=s=void 0,_e(h.effects),v();if(k)return y?S:Y(P=>(y=P,n&&(R({id:n.id+"F",count:0}),n=void 0),e.fallback),f)})})}})}export{Q as $,qe as A,gt as B,ft as C,pt as E,ct as F,ht as M,at as S,m as a,Ye as b,ke as c,Y as d,D as e,le as f,Ue as g,De as h,dt as i,ot as j,Re as k,lt as l,ut as m,ve as n,et as o,fe as p,tt as q,wt as r,d as s,Me as t,A as u,Ze as v,Ne as w,nt as x,rt as y,it as z};
