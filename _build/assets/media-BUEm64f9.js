import{g as s,t as c,s as N,r as y,d as k,a as w,e as P,i as o,f as p,b as L}from"./web-DdXaRKi1.js";import{b as i,i as A,M as b,k as x,t as R,F as T}from"./solid-CBRdhu3b.js";import{H as V}from"./header-D7s3FHGc.js";import{u as D}from"./config-context-Bt3Lq7ah.js";import{S as G}from"./showWhenResource-CK_b83oJ.js";import{j as O,i as W}from"./sparkstone-logo-full-CFxgyvuN.js";const S={"image-container":"_image-container_1pgr9_1"};var Z=c('<svg xmlns=http://www.w3.org/2000/svg fill=currentColor viewBox="0 0 256 256"><path d="M208 88v24H69.77a8 8 0 0 0-7.59 5.47L32 208V64a8 8 0 0 1 8-8h53.33a8 8 0 0 1 4.8 1.6L128 80h72a8 8 0 0 1 8 8"opacity=.2></path><path d="M245 110.64a16 16 0 0 0-13-6.64h-16V88a16 16 0 0 0-16-16h-69.33l-27.73-20.8a16.14 16.14 0 0 0-9.6-3.2H40a16 16 0 0 0-16 16v144a8 8 0 0 0 8 8h179.1a8 8 0 0 0 7.59-5.47l28.49-85.47a16.05 16.05 0 0 0-2.18-14.42M93.34 64l29.86 22.4A8 8 0 0 0 128 88h72v16H69.77a16 16 0 0 0-15.18 10.94L40 158.7V64Zm112 136H43.1l26.67-80H232Z">');const B=(a={})=>(()=>{var n=s(Z);return N(n,a,!0,!0),y(),n})();var M=c("<div>"),U=c("<div><img style=aspect-ratio:1;max-width:100%;height:100%;object-fit:contain;>"),X=c("<article class=card><!$><!/><hr><p style=margin:0>");const q=[".apng",".avif",".bmp",".gif",".ico",".jpg",".jpeg",".png",".svg",".webp"];function z(a){const n=()=>{const t=a.file.type.toLowerCase();return q.find(g=>t.endsWith(g))},f=()=>{let t=a.file.name.lastIndexOf(".");if(t>-1)return a.file.name.slice(t+1).toUpperCase()};return(()=>{var t=s(X),g=t.firstChild,[d,u]=w(g.nextSibling),r=d.nextSibling,h=r.nextSibling;return P(t,"click",a.onClick,!0),o(t,i(A,{get children(){return[i(b,{get when(){return a.file.isDirectory},get children(){var e=s(M);return o(e,i(B,{style:`
              aspect-ratio: 1;
              width: 50%;
              max-width: 100%;
              height: 100%;
              object-fit: contain;
              `})),x(()=>p(e,S["image-container"])),e}}),i(b,{get when(){return n()},get children(){var e=s(U),_=e.firstChild;return x(l=>{var m=S["image-container"],$=a.root+"/"+a.file.name;return m!==l.e&&p(e,l.e=m),$!==l.t&&L(_,"src",l.t=$),l},{e:void 0,t:void 0}),e}}),i(b,{when:!0,get children(){var e=s(M);return o(e,f),x(()=>p(e,S["image-container"])),e}})]}}),d,u),o(h,()=>a.file.name),y(),t})()}k(["click"]);var J=c('<div style="display:grid;gap:1rem;grid-template-columns:repeat(auto-fit, minmax(15rem, min(15rem,100%)))">'),K=c("<main class=container><!$><!/><hr><button class=ghost>Collections</button><button disabled class=ghost>Media</button><hr><!$><!/>");function ie(a){const[n]=D(),f=O(),[t,g]=W();let d=()=>n()?.media_folder+(t.path||"");const[u]=R(()=>d(),r=>(console.log({currentPath:r}),fetch(`http://localhost:4050/storage/ls${r}`).then(h=>h.json())));return(()=>{var r=s(K),h=r.firstChild,[e,_]=w(h.nextSibling),l=e.nextSibling,m=l.nextSibling,$=m.nextSibling,E=$.nextSibling,H=E.nextSibling,[j,F]=w(H.nextSibling);return o(r,i(V,{}),e,_),m.$$click=()=>f("/admin"),o(r,i(G,{resources:[u],get children(){var C=s(J);return o(C,i(T,{get each(){return u()},children:v=>i(z,{onClick:()=>{if(v.isDirectory){let I=t.path??"";g({path:I+"/"+v.name})}},file:v,get root(){return globalThis.origin+n().public_folder+(t.path||"")}})})),C}}),j,F),y(),r})()}k(["click"]);export{ie as default};
