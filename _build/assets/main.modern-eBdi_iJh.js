import{$ as A,t as N,v as R,w as D,e as _}from"./solid-DLBwXPei.js";const C=Symbol("store-raw"),w=Symbol("store-node"),b=Symbol("store-has"),F=Symbol("store-self");function K(e){let n=e[A];if(!n&&(Object.defineProperty(e,A,{value:n=new Proxy(e,q)}),!Array.isArray(e))){const t=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let o=0,l=t.length;o<l;o++){const s=t[o];i[s].get&&Object.defineProperty(e,s,{enumerable:i[s].enumerable,get:i[s].get.bind(n)})}}return n}function P(e){let n;return e!=null&&typeof e=="object"&&(e[A]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function m(e,n=new Set){let t,i,o,l;if(t=e!=null&&e[C])return t;if(!P(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let s=0,r=e.length;s<r;s++)o=e[s],(i=m(o,n))!==o&&(e[s]=i)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const s=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let a=0,O=s.length;a<O;a++)l=s[a],!r[l].get&&(o=e[l],(i=m(o,n))!==o&&(e[l]=i))}return e}function v(e,n){let t=e[n];return t||Object.defineProperty(e,n,{value:t=Object.create(null)}),t}function S(e,n,t){if(e[n])return e[n];const[i,o]=_(t,{equals:!1,internal:!0});return i.$=o,e[n]=i}function E(e,n){const t=Reflect.getOwnPropertyDescriptor(e,n);return!t||t.get||!t.configurable||n===A||n===w||(delete t.value,delete t.writable,t.get=()=>e[A][n]),t}function L(e){D()&&S(v(e,w),F)()}function T(e){return L(e),Reflect.ownKeys(e)}const q={get(e,n,t){if(n===C)return e;if(n===A)return t;if(n===R)return L(e),t;const i=v(e,w),o=i[n];let l=o?o():e[n];if(n===w||n===b||n==="__proto__")return l;if(!o){const s=Object.getOwnPropertyDescriptor(e,n);D()&&(typeof l!="function"||e.hasOwnProperty(n))&&!(s&&s.get)&&(l=S(i,n,l)())}return P(l)?K(l):l},has(e,n){return n===C||n===A||n===R||n===w||n===b||n==="__proto__"?!0:(D()&&S(v(e,b),n)(),n in e)},set(){return!0},deleteProperty(){return!0},ownKeys:T,getOwnPropertyDescriptor:E};function k(e,n,t,i=!1){if(!i&&e[n]===t)return;const o=e[n],l=e.length;t===void 0?(delete e[n],e[b]&&e[b][n]&&o!==void 0&&e[b][n].$()):(e[n]=t,e[b]&&e[b][n]&&o===void 0&&e[b][n].$());let s=v(e,w),r;if((r=S(s,n,o))&&r.$(()=>t),Array.isArray(e)&&e.length!==l){for(let a=e.length;a<l;a++)(r=s[a])&&r.$();(r=S(s,"length",l))&&r.$(e.length)}(r=s[F])&&r.$()}function M(e,n){const t=Object.keys(n);for(let i=0;i<t.length;i+=1){const o=t[i];k(e,o,n[o])}}function z(e,n){if(typeof n=="function"&&(n=n(e)),n=m(n),Array.isArray(n)){if(e===n)return;let t=0,i=n.length;for(;t<i;t++){const o=n[t];e[t]!==o&&k(e,t,o)}k(e,"length",i)}else M(e,n)}function h(e,n,t=[]){let i,o=e;if(n.length>1){i=n.shift();const s=typeof i,r=Array.isArray(e);if(Array.isArray(i)){for(let a=0;a<i.length;a++)h(e,[i[a]].concat(n),t);return}else if(r&&s==="function"){for(let a=0;a<e.length;a++)i(e[a],a)&&h(e,[a].concat(n),t);return}else if(r&&s==="object"){const{from:a=0,to:O=e.length-1,by:$=1}=i;for(let f=a;f<=O;f+=$)h(e,[f].concat(n),t);return}else if(n.length>1){h(e[i],n,[i].concat(t));return}o=e[i],t=[i].concat(t)}let l=n[0];typeof l=="function"&&(l=l(o,t),l===o)||i===void 0&&l==null||(l=m(l),i===void 0||P(o)&&P(l)&&!Array.isArray(l)?M(o,l):k(e,i,l))}function I(...[e,n]){const t=m(e||{}),i=Array.isArray(t),o=K(t);function l(...s){N(()=>{i&&s.length===1?z(t,s[0]):h(t,s)})}return[o,l]}function V({element:e,validators:n=[]},t,i){return async()=>{e.setCustomValidity==null||e.setCustomValidity(""),e.checkValidity==null||e.checkValidity();let o=e.validationMessage;if(!o)for(const s of n){if(!s)continue;const r=await s(e);if(r){o=r,e.setCustomValidity==null||e.setCustomValidity(r);break}}var l;return o&&(i&&e.classList.toggle(i,!0),e.setAttribute("aria-invalid","true"),t({[(l=e.name)!=null?l:e.dataset.name]:o})),o}}function H({errorClass:e=""}={}){const[n,t]=I({}),[i,o]=_(!1),[l,s]=_(!1),r={},a=(f,c=()=>{})=>{queueMicrotask(()=>{var u;let d=(u=f.name)!=null?u:f.dataset.name;const y=c(),g=Array.isArray(y)?y:[];let j;r[d]=j={element:f,validators:g},f.onblur=()=>(s(!1),V(j,t,e)),f.oninput=()=>{s(!1),n[d]&&(t({[d]:void 0}),f.setAttribute("aria-invalid","false"),e&&f.classList.toggle(e,!1))}})};async function O(f,c){let u=!1;for(const y in r){const g=r[y];if(!g)continue;let j=await V(g,t,e)();u||!g.element.validationMessage&&!j||(g.element.focus(),g.element.scrollIntoView({behavior:"smooth"}),document.contains(g.element)?u=!0:delete r[y])}if(u)return;o(!0);let d=await f(c);if(o(!1),d instanceof Object){for(const y in d)y in r&&r[y].element.setAttribute("aria-invalid","true");t(d)}else $(),s(!0)}function $(){t(f=>Object.fromEntries(Object.entries(f).map(([c,u])=>[c,void 0])))}return{validate:a,formSubmit:(f,c)=>{const u=c()||(()=>{});s(!1),f.setAttribute("novalidate",""),f.onsubmit=async d=>{d.preventDefault(),await O(u,f)},f.onreset=()=>{$()}},submit:O,errors:n,isSubmitting:i,isSubmitted:l,validateField:async function(f){const c=r[f];if(!c)return!1;let u=await V(c,t,e)();return(c.element.validationMessage||u)&&(c.element.focus(),c.element.scrollIntoView({behavior:"smooth"})),!n[f]},getFieldValue:function(f){const c=r[f];return c?.element.value},validateRef:(...f)=>c=>a(c,()=>f)}}export{H as n};
