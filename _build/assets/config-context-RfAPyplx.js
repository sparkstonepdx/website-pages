import{n as dr,k as mr,r as gr,b as yr}from"./solid-DLBwXPei.js";import{Y as we,i as ti,a as Ne,b as ni,s as ii,S as V,m as _e,o as Ut,p as Kt,c as Vt,M as kr,d as xe,e as br,f as wr,g as Ge,h as ot,j as gn,l as xr,N as yn,D as kn,k as tt,n as Sr,q as Ir,A as Ht,r as Tr,t as Ar,u as pe,P as Ue,v as Qe,w as ve,x as bn,y as Cr,z as Er,B as Yt,C as at,E as _r,F as Lr,G as ri,H as Ee,L as si,I as Nr,J as vr,K as it,O as oi,Q as Fr,R as Pr,T as Or,U as zr,V as Br,W as ai,X as Mr}from"./handlebars-C7IZMBRA.js";function Rr(e){return"https://api.sparkstonepdx.com"}function Cu(e,n){let t=e.keyField,r=(n[t]??$r()).normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[\x00-\x1F\x7F\\\/:*?"<>,|#%{}[\]^~`]/g,"").replace(/[\s._+]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").toLowerCase();return e.folder+r+".md"}function $r(e=21,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz-"){const t=n.length,i=(2<<Math.floor(Math.log2(t-1)))-1,r=Math.ceil(1.6*i*e/t);let s="";for(;s.length<e;){const o=new Uint8Array(r);crypto.getRandomValues(o);for(let a=0;a<r&&s.length<e;a++){const u=o[a]&i;u<t&&(s+=n[u])}}return s}const Pe={collection:"map",default:!0,nodeClass:we,tag:"tag:yaml.org,2002:map",resolve(e,n){return ti(e)||n("Expected a mapping for this tag"),e},createNode:(e,n,t)=>we.from(e,n,t)},Oe={collection:"seq",default:!0,nodeClass:Ne,tag:"tag:yaml.org,2002:seq",resolve(e,n){return ni(e)||n("Expected a sequence for this tag"),e},createNode:(e,n,t)=>Ne.from(e,n,t)},lt={identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify(e,n,t,i){return n=Object.assign({actualString:!0},n),ii(e,n,t,i)}},ut={identify:e=>e==null,createNode:()=>new V(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new V(null),stringify:({source:e},n)=>typeof e=="string"&&ut.test.test(e)?e:n.options.nullStr},Gt={identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new V(e[0]==="t"||e[0]==="T"),stringify({source:e,value:n},t){if(e&&Gt.test.test(e)){const i=e[0]==="t"||e[0]==="T";if(n===i)return e}return n?t.options.trueStr:t.options.falseStr}};function ne({format:e,minFractionDigits:n,tag:t,value:i}){if(typeof i=="bigint")return String(i);const r=typeof i=="number"?i:Number(i);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let s=Object.is(i,-0)?"-0":JSON.stringify(i);if(!e&&n&&(!t||t==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let o=s.indexOf(".");o<0&&(o=s.length,s+=".");let a=n-(s.length-o-1);for(;a-- >0;)s+="0"}return s}const li={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:ne},ui={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const n=Number(e.value);return isFinite(n)?n.toExponential():ne(e)}},ci={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const n=new V(parseFloat(e)),t=e.indexOf(".");return t!==-1&&e[e.length-1]==="0"&&(n.minFractionDigits=e.length-t-1),n},stringify:ne},ct=e=>typeof e=="bigint"||Number.isInteger(e),Qt=(e,n,t,{intAsBigInt:i})=>i?BigInt(e):parseInt(e.substring(n),t);function fi(e,n,t){const{value:i}=e;return ct(i)&&i>=0?t+i.toString(n):ne(e)}const hi={identify:e=>ct(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,n,t)=>Qt(e,2,8,t),stringify:e=>fi(e,8,"0o")},pi={identify:ct,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,n,t)=>Qt(e,0,10,t),stringify:ne},di={identify:e=>ct(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,n,t)=>Qt(e,2,16,t),stringify:e=>fi(e,16,"0x")},Dr=[Pe,Oe,lt,ut,Gt,hi,pi,di,li,ui,ci];function wn(e){return typeof e=="bigint"||Number.isInteger(e)}const We=({value:e})=>JSON.stringify(e),qr=[{identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:We},{identify:e=>e==null,createNode:()=>new V(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:We},{identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>e==="true",stringify:We},{identify:wn,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,n,{intAsBigInt:t})=>t?BigInt(e):parseInt(e,10),stringify:({value:e})=>wn(e)?e.toString():JSON.stringify(e)},{identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:We}],jr={default:!0,tag:"",test:/^/,resolve(e,n){return n(`Unresolved plain scalar ${JSON.stringify(e)}`),e}},Ur=[Pe,Oe].concat(qr,jr),Wt={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,n){if(typeof atob=="function"){const t=atob(e.replace(/[\n\r]/g,"")),i=new Uint8Array(t.length);for(let r=0;r<t.length;++r)i[r]=t.charCodeAt(r);return i}else return n("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:n,value:t},i,r,s){if(!t)return"";const o=t;let a;if(typeof btoa=="function"){let u="";for(let l=0;l<o.length;++l)u+=String.fromCharCode(o[l]);a=btoa(u)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(n??(n=V.BLOCK_LITERAL),n!==V.QUOTE_DOUBLE){const u=Math.max(i.options.lineWidth-i.indent.length,i.options.minContentWidth),l=Math.ceil(a.length/u),c=new Array(l);for(let f=0,p=0;f<l;++f,p+=u)c[f]=a.substr(p,u);a=c.join(n===V.BLOCK_LITERAL?`
`:" ")}return ii({comment:e,type:n,value:a},i,r,s)}};function mi({value:e,source:n},t){return n&&(e?gi:yi).test.test(n)?n:e?t.options.trueStr:t.options.falseStr}const gi={identify:e=>e===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new V(!0),stringify:mi},yi={identify:e=>e===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new V(!1),stringify:mi},Kr={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:ne},Vr={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const n=Number(e.value);return isFinite(n)?n.toExponential():ne(e)}},Hr={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const n=new V(parseFloat(e.replace(/_/g,""))),t=e.indexOf(".");if(t!==-1){const i=e.substring(t+1).replace(/_/g,"");i[i.length-1]==="0"&&(n.minFractionDigits=i.length)}return n},stringify:ne},Ve=e=>typeof e=="bigint"||Number.isInteger(e);function ft(e,n,t,{intAsBigInt:i}){const r=e[0];if((r==="-"||r==="+")&&(n+=1),e=e.substring(n).replace(/_/g,""),i){switch(t){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`;break}const o=BigInt(e);return r==="-"?BigInt(-1)*o:o}const s=parseInt(e,t);return r==="-"?-1*s:s}function Jt(e,n,t){const{value:i}=e;if(Ve(i)){const r=i.toString(n);return i<0?"-"+t+r.substr(1):t+r}return ne(e)}const Yr={identify:Ve,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,n,t)=>ft(e,2,2,t),stringify:e=>Jt(e,2,"0b")},Gr={identify:Ve,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,n,t)=>ft(e,1,8,t),stringify:e=>Jt(e,8,"0")},Qr={identify:Ve,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,n,t)=>ft(e,0,10,t),stringify:ne},Wr={identify:Ve,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,n,t)=>ft(e,2,16,t),stringify:e=>Jt(e,16,"0x")};function Xt(e,n){const t=e[0],i=t==="-"||t==="+"?e.substring(1):e,r=o=>n?BigInt(o):Number(o),s=i.replace(/_/g,"").split(":").reduce((o,a)=>o*r(60)+r(a),r(0));return t==="-"?r(-1)*s:s}function ki(e){let{value:n}=e,t=o=>o;if(typeof n=="bigint")t=o=>BigInt(o);else if(isNaN(n)||!isFinite(n))return ne(e);let i="";n<0&&(i="-",n*=t(-1));const r=t(60),s=[n%r];return n<60?s.unshift(0):(n=(n-s[0])/r,s.unshift(n%r),n>=60&&(n=(n-s[0])/r,s.unshift(n))),i+s.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const bi={identify:e=>typeof e=="bigint"||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,n,{intAsBigInt:t})=>Xt(e,t),stringify:ki},wi={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>Xt(e,!1),stringify:ki},ht={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const n=e.match(ht.test);if(!n)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,t,i,r,s,o,a]=n.map(Number),u=n[7]?Number((n[7]+"00").substr(1,3)):0;let l=Date.UTC(t,i-1,r,s||0,o||0,a||0,u);const c=n[8];if(c&&c!=="Z"){let f=Xt(c,!1);Math.abs(f)<30&&(f*=60),l-=6e4*f}return new Date(l)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},xn=[Pe,Oe,lt,ut,gi,yi,Yr,Gr,Qr,Wr,Kr,Vr,Hr,Wt,_e,Ut,Kt,Vt,bi,wi,ht],Sn=new Map([["core",Dr],["failsafe",[Pe,Oe,lt]],["json",Ur],["yaml11",xn],["yaml-1.1",xn]]),In={binary:Wt,bool:Gt,float:ci,floatExp:ui,floatNaN:li,floatTime:wi,int:pi,intHex:di,intOct:hi,intTime:bi,map:Pe,merge:_e,null:ut,omap:Ut,pairs:Kt,seq:Oe,set:Vt,timestamp:ht},Jr={"tag:yaml.org,2002:binary":Wt,"tag:yaml.org,2002:merge":_e,"tag:yaml.org,2002:omap":Ut,"tag:yaml.org,2002:pairs":Kt,"tag:yaml.org,2002:set":Vt,"tag:yaml.org,2002:timestamp":ht};function yt(e,n,t){const i=Sn.get(n);if(i&&!e)return t&&!i.includes(_e)?i.concat(_e):i.slice();let r=i;if(!r)if(Array.isArray(e))r=[];else{const s=Array.from(Sn.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${n}"; use one of ${s} or define customTags array`)}if(Array.isArray(e))for(const s of e)r=r.concat(s);else typeof e=="function"&&(r=e(r.slice()));return t&&(r=r.concat(_e)),r.reduce((s,o)=>{const a=typeof o=="string"?In[o]:o;if(!a){const u=JSON.stringify(o),l=Object.keys(In).map(c=>JSON.stringify(c)).join(", ");throw new Error(`Unknown custom tag ${u}; use one of ${l}`)}return s.includes(a)||s.push(a),s},[])}const Xr=(e,n)=>e.key<n.key?-1:e.key>n.key?1:0;class pt{constructor({compat:n,customTags:t,merge:i,resolveKnownTags:r,schema:s,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(n)?yt(n,"compat"):n?yt(null,n):null,this.name=typeof s=="string"&&s||"core",this.knownTags=r?Jr:{},this.tags=yt(t,this.name,i),this.toStringOptions=a??null,Object.defineProperty(this,kr,{value:Pe}),Object.defineProperty(this,xe,{value:lt}),Object.defineProperty(this,br,{value:Oe}),this.sortMapEntries=typeof o=="function"?o:o===!0?Xr:null}clone(){const n=Object.create(pt.prototype,Object.getOwnPropertyDescriptors(this));return n.tags=this.tags.slice(),n}}function Zr(e,n){const t=[];let i=n.directives===!0;if(n.directives!==!1&&e.directives){const u=e.directives.toString(e);u?(t.push(u),i=!0):e.directives.docStart&&(i=!0)}i&&t.push("---");const r=wr(e,n),{commentString:s}=r.options;if(e.commentBefore){t.length!==1&&t.unshift("");const u=s(e.commentBefore);t.unshift(Ge(u,""))}let o=!1,a=null;if(e.contents){if(ot(e.contents)){if(e.contents.spaceBefore&&i&&t.push(""),e.contents.commentBefore){const c=s(e.contents.commentBefore);t.push(Ge(c,""))}r.forceBlockIndent=!!e.comment,a=e.contents.comment}const u=a?void 0:()=>o=!0;let l=gn(e.contents,r,()=>a=null,u);a&&(l+=xr(l,"",s(a))),(l[0]==="|"||l[0]===">")&&t[t.length-1]==="---"?t[t.length-1]=`--- ${l}`:t.push(l)}else t.push(gn(e.contents,r));if(e.directives?.docEnd)if(e.comment){const u=s(e.comment);u.includes(`
`)?(t.push("..."),t.push(Ge(u,""))):t.push(`... ${u}`)}else t.push("...");else{let u=e.comment;u&&o&&(u=u.replace(/^\n+/,"")),u&&((!o||a)&&t[t.length-1]!==""&&t.push(""),t.push(Ge(s(u),"")))}return t.join(`
`)+`
`}class ze{constructor(n,t,i){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,yn,{value:kn});let r=null;typeof t=="function"||Array.isArray(t)?r=t:i===void 0&&t&&(i=t,t=void 0);const s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},i);this.options=s;let{version:o}=s;i?._directives?(this.directives=i._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new tt({version:o}),this.setSchema(o,i),this.contents=n===void 0?null:this.createNode(n,r,i)}clone(){const n=Object.create(ze.prototype,{[yn]:{value:kn}});return n.commentBefore=this.commentBefore,n.comment=this.comment,n.errors=this.errors.slice(),n.warnings=this.warnings.slice(),n.options=Object.assign({},this.options),this.directives&&(n.directives=this.directives.clone()),n.schema=this.schema.clone(),n.contents=ot(this.contents)?this.contents.clone(n.schema):this.contents,this.range&&(n.range=this.range.slice()),n}add(n){Ae(this.contents)&&this.contents.add(n)}addIn(n,t){Ae(this.contents)&&this.contents.addIn(n,t)}createAlias(n,t){if(!n.anchor){const i=Sr(this);n.anchor=!t||i.has(t)?Ir(t||"a",i):t}return new Ht(n.anchor)}createNode(n,t,i){let r;if(typeof t=="function")n=t.call({"":n},"",n),r=t;else if(Array.isArray(t)){const A=E=>typeof E=="number"||E instanceof String||E instanceof Number,k=t.filter(A).map(String);k.length>0&&(t=t.concat(k)),r=t}else i===void 0&&t&&(i=t,t=void 0);const{aliasDuplicateObjects:s,anchorPrefix:o,flow:a,keepUndefined:u,onTagObj:l,tag:c}=i??{},{onAnchor:f,setAnchors:p,sourceObjects:h}=Ar(this,o||"a"),x={aliasDuplicateObjects:s??!0,keepUndefined:u??!1,onAnchor:f,onTagObj:l,replacer:r,schema:this.schema,sourceObjects:h},b=Tr(n,c,x);return a&&pe(b)&&(b.flow=!0),p(),b}createPair(n,t,i={}){const r=this.createNode(n,null,i),s=this.createNode(t,null,i);return new Ue(r,s)}delete(n){return Ae(this.contents)?this.contents.delete(n):!1}deleteIn(n){return Qe(n)?this.contents==null?!1:(this.contents=null,!0):Ae(this.contents)?this.contents.deleteIn(n):!1}get(n,t){return pe(this.contents)?this.contents.get(n,t):void 0}getIn(n,t){return Qe(n)?!t&&ve(this.contents)?this.contents.value:this.contents:pe(this.contents)?this.contents.getIn(n,t):void 0}has(n){return pe(this.contents)?this.contents.has(n):!1}hasIn(n){return Qe(n)?this.contents!==void 0:pe(this.contents)?this.contents.hasIn(n):!1}set(n,t){this.contents==null?this.contents=bn(this.schema,[n],t):Ae(this.contents)&&this.contents.set(n,t)}setIn(n,t){Qe(n)?this.contents=t:this.contents==null?this.contents=bn(this.schema,Array.from(n),t):Ae(this.contents)&&this.contents.setIn(n,t)}setSchema(n,t={}){typeof n=="number"&&(n=String(n));let i;switch(n){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new tt({version:"1.1"}),i={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=n:this.directives=new tt({version:n}),i={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,i=null;break;default:{const r=JSON.stringify(n);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${r}`)}}if(t.schema instanceof Object)this.schema=t.schema;else if(i)this.schema=new pt(Object.assign(i,t));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:n,jsonArg:t,mapAsMap:i,maxAliasCount:r,onAnchor:s,reviver:o}={}){const a={anchors:new Map,doc:this,keep:!n,mapAsMap:i===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},u=Cr(this.contents,t??"",a);if(typeof s=="function")for(const{count:l,res:c}of a.anchors.values())s(c,l);return typeof o=="function"?Er(o,{"":u},"",u):u}toJSON(n,t){return this.toJS({json:!0,jsonArg:n,mapAsMap:!1,onAnchor:t})}toString(n={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in n&&(!Number.isInteger(n.indent)||Number(n.indent)<=0)){const t=JSON.stringify(n.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return Zr(this,n)}}function Ae(e){if(pe(e))return!0;throw new Error("Expected a YAML collection as document contents")}function Fe(e,{flow:n,indicator:t,next:i,offset:r,onError:s,parentIndent:o,startOnNewline:a}){let u=!1,l=a,c=a,f="",p="",h=!1,x=!1,b=null,A=null,k=null,E=null,w=null,v=null,N=null;for(const T of e)switch(x&&(T.type!=="space"&&T.type!=="newline"&&T.type!=="comma"&&s(T.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),x=!1),b&&(l&&T.type!=="comment"&&T.type!=="newline"&&s(b,"TAB_AS_INDENT","Tabs are not allowed as indentation"),b=null),T.type){case"space":!n&&(t!=="doc-start"||i?.type!=="flow-collection")&&T.source.includes("	")&&(b=T),c=!0;break;case"comment":{c||s(T,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const F=T.source.substring(1)||" ";f?f+=p+F:f=F,p="",l=!1;break}case"newline":l?f?f+=T.source:(!v||t!=="seq-item-ind")&&(u=!0):p+=T.source,l=!0,h=!0,(A||k)&&(E=T),c=!0;break;case"anchor":A&&s(T,"MULTIPLE_ANCHORS","A node can have at most one anchor"),T.source.endsWith(":")&&s(T.offset+T.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),A=T,N??(N=T.offset),l=!1,c=!1,x=!0;break;case"tag":{k&&s(T,"MULTIPLE_TAGS","A node can have at most one tag"),k=T,N??(N=T.offset),l=!1,c=!1,x=!0;break}case t:(A||k)&&s(T,"BAD_PROP_ORDER",`Anchors and tags must be after the ${T.source} indicator`),v&&s(T,"UNEXPECTED_TOKEN",`Unexpected ${T.source} in ${n??"collection"}`),v=T,l=t==="seq-item-ind"||t==="explicit-key-ind",c=!1;break;case"comma":if(n){w&&s(T,"UNEXPECTED_TOKEN",`Unexpected , in ${n}`),w=T,l=!1,c=!1;break}default:s(T,"UNEXPECTED_TOKEN",`Unexpected ${T.type} token`),l=!1,c=!1}const g=e[e.length-1],S=g?g.offset+g.source.length:r;return x&&i&&i.type!=="space"&&i.type!=="newline"&&i.type!=="comma"&&(i.type!=="scalar"||i.source!=="")&&s(i.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),b&&(l&&b.indent<=o||i?.type==="block-map"||i?.type==="block-seq")&&s(b,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:w,found:v,spaceBefore:u,comment:f,hasNewline:h,anchor:A,tag:k,newlineAfterProp:E,end:S,start:N??S}}function Ke(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes(`
`))return!0;if(e.end){for(const n of e.end)if(n.type==="newline")return!0}return!1;case"flow-collection":for(const n of e.items){for(const t of n.start)if(t.type==="newline")return!0;if(n.sep){for(const t of n.sep)if(t.type==="newline")return!0}if(Ke(n.key)||Ke(n.value))return!0}return!1;default:return!0}}function Ft(e,n,t){if(n?.type==="flow-collection"){const i=n.end[0];i.indent===e&&(i.source==="]"||i.source==="}")&&Ke(n)&&t(i,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function xi(e,n,t){const{uniqueKeys:i}=e.options;if(i===!1)return!1;const r=typeof i=="function"?i:(s,o)=>s===o||ve(s)&&ve(o)&&s.value===o.value;return n.some(s=>r(s.key,t))}const Tn="All mapping items must start at the same column";function es({composeNode:e,composeEmptyNode:n},t,i,r,s){const o=s?.nodeClass??we,a=new o(t.schema);t.atRoot&&(t.atRoot=!1);let u=i.offset,l=null;for(const c of i.items){const{start:f,key:p,sep:h,value:x}=c,b=Fe(f,{indicator:"explicit-key-ind",next:p??h?.[0],offset:u,onError:r,parentIndent:i.indent,startOnNewline:!0}),A=!b.found;if(A){if(p&&(p.type==="block-seq"?r(u,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in p&&p.indent!==i.indent&&r(u,"BAD_INDENT",Tn)),!b.anchor&&!b.tag&&!h){l=b.end,b.comment&&(a.comment?a.comment+=`
`+b.comment:a.comment=b.comment);continue}(b.newlineAfterProp||Ke(p))&&r(p??f[f.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else b.found?.indent!==i.indent&&r(u,"BAD_INDENT",Tn);t.atKey=!0;const k=b.end,E=p?e(t,p,b,r):n(t,k,f,null,b,r);t.schema.compat&&Ft(i.indent,p,r),t.atKey=!1,xi(t,a.items,E)&&r(k,"DUPLICATE_KEY","Map keys must be unique");const w=Fe(h??[],{indicator:"map-value-ind",next:x,offset:E.range[2],onError:r,parentIndent:i.indent,startOnNewline:!p||p.type==="block-scalar"});if(u=w.end,w.found){A&&(x?.type==="block-map"&&!w.hasNewline&&r(u,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),t.options.strict&&b.start<w.found.offset-1024&&r(E.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const v=x?e(t,x,w,r):n(t,u,h,null,w,r);t.schema.compat&&Ft(i.indent,x,r),u=v.range[2];const N=new Ue(E,v);t.options.keepSourceTokens&&(N.srcToken=c),a.items.push(N)}else{A&&r(E.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),w.comment&&(E.comment?E.comment+=`
`+w.comment:E.comment=w.comment);const v=new Ue(E);t.options.keepSourceTokens&&(v.srcToken=c),a.items.push(v)}}return l&&l<u&&r(l,"IMPOSSIBLE","Map comment with trailing content"),a.range=[i.offset,u,l??u],a}function ts({composeNode:e,composeEmptyNode:n},t,i,r,s){const o=s?.nodeClass??Ne,a=new o(t.schema);t.atRoot&&(t.atRoot=!1),t.atKey&&(t.atKey=!1);let u=i.offset,l=null;for(const{start:c,value:f}of i.items){const p=Fe(c,{indicator:"seq-item-ind",next:f,offset:u,onError:r,parentIndent:i.indent,startOnNewline:!0});if(!p.found)if(p.anchor||p.tag||f)f?.type==="block-seq"?r(p.end,"BAD_INDENT","All sequence items must start at the same column"):r(u,"MISSING_CHAR","Sequence item without - indicator");else{l=p.end,p.comment&&(a.comment=p.comment);continue}const h=f?e(t,f,p,r):n(t,p.end,c,null,p,r);t.schema.compat&&Ft(i.indent,f,r),u=h.range[2],a.items.push(h)}return a.range=[i.offset,u,l??u],a}const kt="Block collections are not allowed within flow collections",bt=e=>e&&(e.type==="block-map"||e.type==="block-seq");function ns({composeNode:e,composeEmptyNode:n},t,i,r,s){const o=i.start.source==="{",a=o?"flow map":"flow sequence",u=s?.nodeClass??(o?we:Ne),l=new u(t.schema);l.flow=!0;const c=t.atRoot;c&&(t.atRoot=!1),t.atKey&&(t.atKey=!1);let f=i.offset+i.start.source.length;for(let A=0;A<i.items.length;++A){const k=i.items[A],{start:E,key:w,sep:v,value:N}=k,g=Fe(E,{flow:a,indicator:"explicit-key-ind",next:w??v?.[0],offset:f,onError:r,parentIndent:i.indent,startOnNewline:!1});if(!g.found){if(!g.anchor&&!g.tag&&!v&&!N){A===0&&g.comma?r(g.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):A<i.items.length-1&&r(g.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),g.comment&&(l.comment?l.comment+=`
`+g.comment:l.comment=g.comment),f=g.end;continue}!o&&t.options.strict&&Ke(w)&&r(w,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(A===0)g.comma&&r(g.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(g.comma||r(g.start,"MISSING_CHAR",`Missing , between ${a} items`),g.comment){let S="";e:for(const T of E)switch(T.type){case"comma":case"space":break;case"comment":S=T.source.substring(1);break e;default:break e}if(S){let T=l.items[l.items.length-1];Yt(T)&&(T=T.value??T.key),T.comment?T.comment+=`
`+S:T.comment=S,g.comment=g.comment.substring(S.length+1)}}if(!o&&!v&&!g.found){const S=N?e(t,N,g,r):n(t,g.end,v,null,g,r);l.items.push(S),f=S.range[2],bt(N)&&r(S.range,"BLOCK_IN_FLOW",kt)}else{t.atKey=!0;const S=g.end,T=w?e(t,w,g,r):n(t,S,E,null,g,r);bt(w)&&r(T.range,"BLOCK_IN_FLOW",kt),t.atKey=!1;const F=Fe(v??[],{flow:a,indicator:"map-value-ind",next:N,offset:T.range[2],onError:r,parentIndent:i.indent,startOnNewline:!1});if(F.found){if(!o&&!g.found&&t.options.strict){if(v)for(const C of v){if(C===F.found)break;if(C.type==="newline"){r(C,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}g.start<F.found.offset-1024&&r(F.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else N&&("source"in N&&N.source?.[0]===":"?r(N,"MISSING_CHAR",`Missing space after : in ${a}`):r(F.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const M=N?e(t,N,F,r):F.found?n(t,F.end,v,null,F,r):null;M?bt(N)&&r(M.range,"BLOCK_IN_FLOW",kt):F.comment&&(T.comment?T.comment+=`
`+F.comment:T.comment=F.comment);const _=new Ue(T,M);if(t.options.keepSourceTokens&&(_.srcToken=k),o){const C=l;xi(t,C.items,T)&&r(S,"DUPLICATE_KEY","Map keys must be unique"),C.items.push(_)}else{const C=new we(t.schema);C.flow=!0,C.items.push(_);const R=(M??T).range;C.range=[T.range[0],R[1],R[2]],l.items.push(C)}f=M?M.range[2]:F.end}}const p=o?"}":"]",[h,...x]=i.end;let b=f;if(h?.source===p)b=h.offset+h.source.length;else{const A=a[0].toUpperCase()+a.substring(1),k=c?`${A} must end with a ${p}`:`${A} in block collection must be sufficiently indented and end with a ${p}`;r(f,c?"MISSING_CHAR":"BAD_INDENT",k),h&&h.source.length!==1&&x.unshift(h)}if(x.length>0){const A=at(x,b,t.options.strict,r);A.comment&&(l.comment?l.comment+=`
`+A.comment:l.comment=A.comment),l.range=[i.offset,b,A.offset]}else l.range=[i.offset,b,b];return l}function wt(e,n,t,i,r,s){const o=t.type==="block-map"?es(e,n,t,i,s):t.type==="block-seq"?ts(e,n,t,i,s):ns(e,n,t,i,s),a=o.constructor;return r==="!"||r===a.tagName?(o.tag=a.tagName,o):(r&&(o.tag=r),o)}function is(e,n,t,i,r){const s=i.tag,o=s?n.directives.tagName(s.source,p=>r(s,"TAG_RESOLVE_FAILED",p)):null;if(t.type==="block-seq"){const{anchor:p,newlineAfterProp:h}=i,x=p&&s?p.offset>s.offset?p:s:p??s;x&&(!h||h.offset<x.offset)&&r(x,"MISSING_CHAR","Missing newline after block sequence props")}const a=t.type==="block-map"?"map":t.type==="block-seq"?"seq":t.start.source==="{"?"map":"seq";if(!s||!o||o==="!"||o===we.tagName&&a==="map"||o===Ne.tagName&&a==="seq")return wt(e,n,t,r,o);let u=n.schema.tags.find(p=>p.tag===o&&p.collection===a);if(!u){const p=n.schema.knownTags[o];if(p?.collection===a)n.schema.tags.push(Object.assign({},p,{default:!1})),u=p;else return p?r(s,"BAD_COLLECTION_TYPE",`${p.tag} used for ${a} collection, but expects ${p.collection??"scalar"}`,!0):r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),wt(e,n,t,r,o)}const l=wt(e,n,t,r,o,u),c=u.resolve?.(l,p=>r(s,"TAG_RESOLVE_FAILED",p),n.options)??l,f=ot(c)?c:new V(c);return f.range=l.range,f.tag=o,u?.format&&(f.format=u.format),f}function Si(e,n,t,i){const{value:r,type:s,comment:o,range:a}=n.type==="block-scalar"?_r(e,n,i):Lr(n,e.options.strict,i),u=t?e.directives.tagName(t.source,f=>i(t,"TAG_RESOLVE_FAILED",f)):null;let l;e.options.stringKeys&&e.atKey?l=e.schema[xe]:u?l=rs(e.schema,r,u,t,i):n.type==="scalar"?l=ss(e,r,n,i):l=e.schema[xe];let c;try{const f=l.resolve(r,p=>i(t??n,"TAG_RESOLVE_FAILED",p),e.options);c=ve(f)?f:new V(f)}catch(f){const p=f instanceof Error?f.message:String(f);i(t??n,"TAG_RESOLVE_FAILED",p),c=new V(r)}return c.range=a,c.source=r,s&&(c.type=s),u&&(c.tag=u),l.format&&(c.format=l.format),o&&(c.comment=o),c}function rs(e,n,t,i,r){if(t==="!")return e[xe];const s=[];for(const a of e.tags)if(!a.collection&&a.tag===t)if(a.default&&a.test)s.push(a);else return a;for(const a of s)if(a.test?.test(n))return a;const o=e.knownTags[t];return o&&!o.collection?(e.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(r(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${t}`,t!=="tag:yaml.org,2002:str"),e[xe])}function ss({atKey:e,directives:n,schema:t},i,r,s){const o=t.tags.find(a=>(a.default===!0||e&&a.default==="key")&&a.test?.test(i))||t[xe];if(t.compat){const a=t.compat.find(u=>u.default&&u.test?.test(i))??t[xe];if(o.tag!==a.tag){const u=n.tagString(o.tag),l=n.tagString(a.tag),c=`Value may be parsed as either ${u} or ${l}`;s(r,"TAG_RESOLVE_FAILED",c,!0)}}return o}function os(e,n,t){if(n){t??(t=n.length);for(let i=t-1;i>=0;--i){let r=n[i];switch(r.type){case"space":case"comment":case"newline":e-=r.source.length;continue}for(r=n[++i];r?.type==="space";)e+=r.source.length,r=n[++i];break}}return e}const as={composeNode:Ii,composeEmptyNode:Zt};function Ii(e,n,t,i){const r=e.atKey,{spaceBefore:s,comment:o,anchor:a,tag:u}=t;let l,c=!0;switch(n.type){case"alias":l=ls(e,n,i),(a||u)&&i(n,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=Si(e,n,u,i),a&&(l.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=is(as,e,n,t,i),a&&(l.anchor=a.source.substring(1));break;default:{const f=n.type==="error"?n.message:`Unsupported token (type: ${n.type})`;i(n,"UNEXPECTED_TOKEN",f),l=Zt(e,n.offset,void 0,null,t,i),c=!1}}return a&&l.anchor===""&&i(a,"BAD_ALIAS","Anchor cannot be an empty string"),r&&e.options.stringKeys&&(!ve(l)||typeof l.value!="string"||l.tag&&l.tag!=="tag:yaml.org,2002:str")&&i(u??n,"NON_STRING_KEY","With stringKeys, all keys must be strings"),s&&(l.spaceBefore=!0),o&&(n.type==="scalar"&&n.source===""?l.comment=o:l.commentBefore=o),e.options.keepSourceTokens&&c&&(l.srcToken=n),l}function Zt(e,n,t,i,{spaceBefore:r,comment:s,anchor:o,tag:a,end:u},l){const c={type:"scalar",offset:os(n,t,i),indent:-1,source:""},f=Si(e,c,a,l);return o&&(f.anchor=o.source.substring(1),f.anchor===""&&l(o,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(f.spaceBefore=!0),s&&(f.comment=s,f.range[2]=u),f}function ls({options:e},{offset:n,source:t,end:i},r){const s=new Ht(t.substring(1));s.source===""&&r(n,"BAD_ALIAS","Alias cannot be an empty string"),s.source.endsWith(":")&&r(n+t.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=n+t.length,a=at(i,o,e.strict,r);return s.range=[n,o,a.offset],a.comment&&(s.comment=a.comment),s}function us(e,n,{offset:t,start:i,value:r,end:s},o){const a=Object.assign({_directives:n},e),u=new ze(void 0,a),l={atKey:!1,atRoot:!0,directives:u.directives,options:u.options,schema:u.schema},c=Fe(i,{indicator:"doc-start",next:r??s?.[0],offset:t,onError:o,parentIndent:0,startOnNewline:!0});c.found&&(u.directives.docStart=!0,r&&(r.type==="block-map"||r.type==="block-seq")&&!c.hasNewline&&o(c.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),u.contents=r?Ii(l,r,c,o):Zt(l,c.end,i,null,c,o);const f=u.contents.range[2],p=at(s,f,!1,o);return p.comment&&(u.comment=p.comment),u.range=[t,f,p.offset],u}function $e(e){if(typeof e=="number")return[e,e+1];if(Array.isArray(e))return e.length===2?e:[e[0],e[1]];const{offset:n,source:t}=e;return[n,n+(typeof t=="string"?t.length:1)]}function An(e){let n="",t=!1,i=!1;for(let r=0;r<e.length;++r){const s=e[r];switch(s[0]){case"#":n+=(n===""?"":i?`

`:`
`)+(s.substring(1)||" "),t=!0,i=!1;break;case"%":e[r+1]?.[0]!=="#"&&(r+=1),t=!1;break;default:t||(i=!0),t=!1}}return{comment:n,afterEmptyLine:i}}class en{constructor(n={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(t,i,r,s)=>{const o=$e(t);s?this.warnings.push(new ri(o,i,r)):this.errors.push(new Ee(o,i,r))},this.directives=new tt({version:n.version||"1.2"}),this.options=n}decorate(n,t){const{comment:i,afterEmptyLine:r}=An(this.prelude);if(i){const s=n.contents;if(t)n.comment=n.comment?`${n.comment}
${i}`:i;else if(r||n.directives.docStart||!s)n.commentBefore=i;else if(pe(s)&&!s.flow&&s.items.length>0){let o=s.items[0];Yt(o)&&(o=o.key);const a=o.commentBefore;o.commentBefore=a?`${i}
${a}`:i}else{const o=s.commentBefore;s.commentBefore=o?`${i}
${o}`:i}}t?(Array.prototype.push.apply(n.errors,this.errors),Array.prototype.push.apply(n.warnings,this.warnings)):(n.errors=this.errors,n.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:An(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(n,t=!1,i=-1){for(const r of n)yield*this.next(r);yield*this.end(t,i)}*next(n){switch(n.type){case"directive":this.directives.add(n.source,(t,i,r)=>{const s=$e(n);s[0]+=t,this.onError(s,"BAD_DIRECTIVE",i,r)}),this.prelude.push(n.source),this.atDirectives=!0;break;case"document":{const t=us(this.options,this.directives,n,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(n,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(n.source);break;case"error":{const t=n.source?`${n.message}: ${JSON.stringify(n.source)}`:n.message,i=new Ee($e(n),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(i):this.doc.errors.push(i);break}case"doc-end":{if(!this.doc){const i="Unexpected doc-end without preceding document";this.errors.push(new Ee($e(n),"UNEXPECTED_TOKEN",i));break}this.doc.directives.docEnd=!0;const t=at(n.end,n.offset+n.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const i=this.doc.comment;this.doc.comment=i?`${i}
${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new Ee($e(n),"UNEXPECTED_TOKEN",`Unsupported token ${n.type}`))}}*end(n=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(n){const i=Object.assign({_directives:this.directives},this.options),r=new ze(void 0,i);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),r.range=[0,t,t],this.decorate(r,!1),yield r}}}class Ti{constructor(){this.lineStarts=[],this.addNewLine=n=>this.lineStarts.push(n),this.linePos=n=>{let t=0,i=this.lineStarts.length;for(;t<i;){const s=t+i>>1;this.lineStarts[s]<n?t=s+1:i=s}if(this.lineStarts[t]===n)return{line:t+1,col:1};if(t===0)return{line:0,col:n};const r=this.lineStarts[t-1];return{line:t,col:n-r+1}}}}function he(e,n){for(let t=0;t<e.length;++t)if(e[t].type===n)return!0;return!1}function Cn(e){for(let n=0;n<e.length;++n)switch(e[n].type){case"space":case"comment":case"newline":break;default:return n}return-1}function Ai(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Je(e){switch(e.type){case"document":return e.start;case"block-map":{const n=e.items[e.items.length-1];return n.sep??n.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function Ce(e){if(e.length===0)return[];let n=e.length;e:for(;--n>=0;)switch(e[n].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;e[++n]?.type==="space";);return e.splice(n,e.length)}function En(e){if(e.start.type==="flow-seq-start")for(const n of e.items)n.sep&&!n.value&&!he(n.start,"explicit-key-ind")&&!he(n.sep,"map-value-ind")&&(n.key&&(n.value=n.key),delete n.key,Ai(n.value)?n.value.end?Array.prototype.push.apply(n.value.end,n.sep):n.value.end=n.sep:Array.prototype.push.apply(n.start,n.sep),delete n.sep)}class tn{constructor(n){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new si,this.onNewLine=n}*parse(n,t=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const i of this.lexer.lex(n,t))yield*this.next(i);t||(yield*this.end())}*next(n){if(this.source=n,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=n.length;return}const t=Nr(n);if(t)if(t==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+n.length);break;case"space":this.atNewLine&&n[0]===" "&&(this.indent+=n.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=n.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=n.length}else{const i=`Not a YAML token: ${n}`;yield*this.pop({type:"error",offset:this.offset,message:i,source:n}),this.offset+=n.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const n=this.peek(1);if(this.type==="doc-end"&&n?.type!=="doc-end"){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!n)return yield*this.stream();switch(n.type){case"document":return yield*this.document(n);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(n);case"block-scalar":return yield*this.blockScalar(n);case"block-map":return yield*this.blockMap(n);case"block-seq":return yield*this.blockSequence(n);case"flow-collection":return yield*this.flowCollection(n);case"doc-end":return yield*this.documentEnd(n)}yield*this.pop()}peek(n){return this.stack[this.stack.length-n]}*pop(n){const t=n??this.stack.pop();if(!t)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield t;else{const i=this.peek(1);switch(t.type==="block-scalar"?t.indent="indent"in i?i.indent:0:t.type==="flow-collection"&&i.type==="document"&&(t.indent=0),t.type==="flow-collection"&&En(t),i.type){case"document":i.value=t;break;case"block-scalar":i.props.push(t);break;case"block-map":{const r=i.items[i.items.length-1];if(r.value){i.items.push({start:[],key:t,sep:[]}),this.onKeyLine=!0;return}else if(r.sep)r.value=t;else{Object.assign(r,{key:t,sep:[]}),this.onKeyLine=!r.explicitKey;return}break}case"block-seq":{const r=i.items[i.items.length-1];r.value?i.items.push({start:[],value:t}):r.value=t;break}case"flow-collection":{const r=i.items[i.items.length-1];!r||r.value?i.items.push({start:[],key:t,sep:[]}):r.sep?r.value=t:Object.assign(r,{key:t,sep:[]});return}default:yield*this.pop(),yield*this.pop(t)}if((i.type==="document"||i.type==="block-map"||i.type==="block-seq")&&(t.type==="block-map"||t.type==="block-seq")){const r=t.items[t.items.length-1];r&&!r.sep&&!r.value&&r.start.length>0&&Cn(r.start)===-1&&(t.indent===0||r.start.every(s=>s.type!=="comment"||s.indent<t.indent))&&(i.type==="document"?i.end=r.start:i.items.push({start:r.start}),t.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const n={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&n.start.push(this.sourceToken),this.stack.push(n);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(n){if(n.value)return yield*this.lineEnd(n);switch(this.type){case"doc-start":{Cn(n.start)!==-1?(yield*this.pop(),yield*this.step()):n.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":n.start.push(this.sourceToken);return}const t=this.startBlockValue(n);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(n){if(this.type==="map-value-ind"){const t=Je(this.peek(2)),i=Ce(t);let r;n.end?(r=n.end,r.push(this.sourceToken),delete n.end):r=[this.sourceToken];const s={type:"block-map",offset:n.offset,indent:n.indent,items:[{start:i,key:n,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(n)}*blockScalar(n){switch(this.type){case"space":case"comment":case"newline":n.props.push(this.sourceToken);return;case"scalar":if(n.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let t=this.source.indexOf(`
`)+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf(`
`,t)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(n){const t=n.items[n.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){const i="end"in t.value?t.value.end:void 0;(Array.isArray(i)?i[i.length-1]:void 0)?.type==="comment"?i?.push(this.sourceToken):n.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)n.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,n.indent)){const r=n.items[n.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),n.items.pop();return}}t.start.push(this.sourceToken)}return}if(this.indent>=n.indent){const i=!this.onKeyLine&&this.indent===n.indent,r=i&&(t.sep||t.explicitKey)&&this.type!=="seq-item-ind";let s=[];if(r&&t.sep&&!t.value){const o=[];for(let a=0;a<t.sep.length;++a){const u=t.sep[a];switch(u.type){case"newline":o.push(a);break;case"space":break;case"comment":u.indent>n.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(s=t.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":r||t.value?(s.push(this.sourceToken),n.items.push({start:s}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"explicit-key-ind":!t.sep&&!t.explicitKey?(t.start.push(this.sourceToken),t.explicitKey=!0):r||t.value?(s.push(this.sourceToken),n.items.push({start:s,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(t.explicitKey)if(t.sep)if(t.value)n.items.push({start:[],key:null,sep:[this.sourceToken]});else if(he(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(Ai(t.key)&&!he(t.sep,"newline")){const o=Ce(t.start),a=t.key,u=t.sep;u.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:a,sep:u}]})}else s.length>0?t.sep=t.sep.concat(s,this.sourceToken):t.sep.push(this.sourceToken);else if(he(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{const o=Ce(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||r?n.items.push({start:s,key:null,sep:[this.sourceToken]}):he(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);r||t.value?(n.items.push({start:s,key:o,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(o):(Object.assign(t,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{const o=this.startBlockValue(n);if(o){if(o.type==="block-seq"){if(!t.explicitKey&&t.sep&&!he(t.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else i&&n.items.push({start:s});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(n){const t=n.items[n.items.length-1];switch(this.type){case"newline":if(t.value){const i="end"in t.value?t.value.end:void 0;(Array.isArray(i)?i[i.length-1]:void 0)?.type==="comment"?i?.push(this.sourceToken):n.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)n.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,n.indent)){const r=n.items[n.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),n.items.pop();return}}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=n.indent)break;t.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==n.indent)break;t.value||he(t.start,"seq-item-ind")?n.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return}if(this.indent>n.indent){const i=this.startBlockValue(n);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(n){const t=n.items[n.items.length-1];if(this.type==="flow-error-end"){let i;do yield*this.pop(),i=this.peek(1);while(i?.type==="flow-collection")}else if(n.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!t||t.sep?n.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return;case"map-value-ind":!t||t.value?n.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!t||t.value?n.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);!t||t.value?n.items.push({start:[],key:r,sep:[]}):t.sep?this.stack.push(r):Object.assign(t,{key:r,sep:[]});return}case"flow-map-end":case"flow-seq-end":n.end.push(this.sourceToken);return}const i=this.startBlockValue(n);i?this.stack.push(i):(yield*this.pop(),yield*this.step())}else{const i=this.peek(2);if(i.type==="block-map"&&(this.type==="map-value-ind"&&i.indent===n.indent||this.type==="newline"&&!i.items[i.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&i.type!=="flow-collection"){const r=Je(i),s=Ce(r);En(n);const o=n.end.splice(1,n.end.length);o.push(this.sourceToken);const a={type:"block-map",offset:n.offset,indent:n.indent,items:[{start:s,key:n,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(n)}}flowScalar(n){if(this.onNewLine){let t=this.source.indexOf(`
`)+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf(`
`,t)+1}return{type:n,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(n){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const t=Je(n),i=Ce(t);return i.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const t=Je(n),i=Ce(t);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(n,t){return this.type!=="comment"||this.indent<=t?!1:n.every(i=>i.type==="newline"||i.type==="space")}*documentEnd(n){this.type!=="doc-mode"&&(n.end?n.end.push(this.sourceToken):n.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(n){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:n.end?n.end.push(this.sourceToken):n.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function Ci(e){const n=e.prettyErrors!==!1;return{lineCounter:e.lineCounter||n&&new Ti||null,prettyErrors:n}}function cs(e,n={}){const{lineCounter:t,prettyErrors:i}=Ci(n),r=new tn(t?.addNewLine),s=new en(n),o=Array.from(s.compose(r.parse(e)));if(i&&t)for(const a of o)a.errors.forEach(it(e,t)),a.warnings.forEach(it(e,t));return o.length>0?o:Object.assign([],{empty:!0},s.streamInfo())}function Ei(e,n={}){const{lineCounter:t,prettyErrors:i}=Ci(n),r=new tn(t?.addNewLine),s=new en(n);let o=null;for(const a of s.compose(r.parse(e),!0,e.length))if(!o)o=a;else if(o.options.logLevel!=="silent"){o.errors.push(new Ee(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return i&&t&&(o.errors.forEach(it(e,t)),o.warnings.forEach(it(e,t))),o}function _i(e,n,t){let i;typeof n=="function"?i=n:t===void 0&&n&&typeof n=="object"&&(t=n);const r=Ei(e,t);if(!r)return null;if(r.warnings.forEach(s=>vr(r.options.logLevel,s)),r.errors.length>0){if(r.options.logLevel!=="silent")throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:i},t))}function fs(e,n,t){let i=null;if(typeof n=="function"||Array.isArray(n)?i=n:t===void 0&&n&&(t=n),typeof t=="string"&&(t=t.length),typeof t=="number"){const r=Math.round(t);t=r<1?void 0:r>8?{indent:8}:{indent:r}}if(e===void 0){const{keepUndefined:r}=t??n??{};if(!r)return}return oi(e)&&!i?e.toString(t):new ze(e,i,t).toString(t)}const Li=Object.freeze(Object.defineProperty({__proto__:null,Alias:Ht,CST:Fr,Composer:en,Document:ze,Lexer:si,LineCounter:Ti,Pair:Ue,Parser:tn,Scalar:V,Schema:pt,YAMLError:Pr,YAMLMap:we,YAMLParseError:Ee,YAMLSeq:Ne,YAMLWarning:ri,isAlias:Or,isCollection:pe,isDocument:oi,isMap:ti,isNode:ot,isPair:Yt,isScalar:ve,isSeq:ni,parse:_i,parseAllDocuments:cs,parseDocument:Ei,stringify:fs,visit:zr,visitAsync:Br},Symbol.toStringTag,{value:"Module"})),hs={};function nn(e,n){const t=hs,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return Ni(e,i,r)}function Ni(e,n,t){if(ps(e)){if("value"in e)return e.type==="html"&&!t?"":e.value;if(n&&"alt"in e&&e.alt)return e.alt;if("children"in e)return _n(e.children,n,t)}return Array.isArray(e)?_n(e,n,t):""}function _n(e,n,t){const i=[];let r=-1;for(;++r<e.length;)i[r]=Ni(e[r],n,t);return i.join("")}function ps(e){return!!(e&&typeof e=="object")}const Ln=document.createElement("i");function rn(e){const n="&"+e+";";Ln.innerHTML=n;const t=Ln.textContent;return t.charCodeAt(t.length-1)===59&&e!=="semi"||t===n?!1:t}function se(e,n,t,i){const r=e.length;let s=0,o;if(n<0?n=-n>r?0:r+n:n=n>r?r:n,t=t>0?t:0,i.length<1e4)o=Array.from(i),o.unshift(n,t),e.splice(...o);else for(t&&e.splice(n,t);s<i.length;)o=i.slice(s,s+1e4),o.unshift(n,0),e.splice(...o),s+=1e4,n+=1e4}function W(e,n){return e.length>0?(se(e,e.length,0,n),e):n}const Nn={}.hasOwnProperty;function ds(e){const n={};let t=-1;for(;++t<e.length;)ms(n,e[t]);return n}function ms(e,n){let t;for(t in n){const r=(Nn.call(e,t)?e[t]:void 0)||(e[t]={}),s=n[t];let o;if(s)for(o in s){Nn.call(r,o)||(r[o]=[]);const a=s[o];gs(r[o],Array.isArray(a)?a:a?[a]:[])}}}function gs(e,n){let t=-1;const i=[];for(;++t<n.length;)(n[t].add==="after"?e:i).push(n[t]);se(e,0,0,i)}function vi(e,n){const t=Number.parseInt(e,n);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function Le(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const re=me(/[A-Za-z]/),te=me(/[\dA-Za-z]/),ys=me(/[#-'*+\--9=?A-Z^-~]/);function Pt(e){return e!==null&&(e<32||e===127)}const Ot=me(/\d/),ks=me(/[\dA-Fa-f]/),bs=me(/[!-/:-@[-`{-~]/);function L(e){return e!==null&&e<-2}function Y(e){return e!==null&&(e<0||e===32)}function z(e){return e===-2||e===-1||e===32}const ws=me(/\p{P}|\p{S}/u),xs=me(/\s/);function me(e){return n;function n(t){return t!==null&&t>-1&&e.test(String.fromCharCode(t))}}function D(e,n,t,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return z(u)?(e.enter(t),a(u)):n(u)}function a(u){return z(u)&&s++<r?(e.consume(u),a):(e.exit(t),n(u))}}const Ss={tokenize:Is};function Is(e){const n=e.attempt(this.parser.constructs.contentInitial,i,r);let t;return n;function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),D(e,n,"linePrefix")}function r(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=u),t=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return L(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const Ts={tokenize:As},vn={tokenize:Cs};function As(e){const n=this,t=[];let i=0,r,s,o;return a;function a(w){if(i<t.length){const v=t[i];return n.containerState=v[1],e.attempt(v[0].continuation,u,l)(w)}return l(w)}function u(w){if(i++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,r&&E();const v=n.events.length;let N=v,g;for(;N--;)if(n.events[N][0]==="exit"&&n.events[N][1].type==="chunkFlow"){g=n.events[N][1].end;break}k(i);let S=v;for(;S<n.events.length;)n.events[S][1].end={...g},S++;return se(n.events,N+1,0,n.events.slice(v)),n.events.length=S,l(w)}return a(w)}function l(w){if(i===t.length){if(!r)return p(w);if(r.currentConstruct&&r.currentConstruct.concrete)return x(w);n.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return n.containerState={},e.check(vn,c,f)(w)}function c(w){return r&&E(),k(i),p(w)}function f(w){return n.parser.lazy[n.now().line]=i!==t.length,o=n.now().offset,x(w)}function p(w){return n.containerState={},e.attempt(vn,h,x)(w)}function h(w){return i++,t.push([n.currentConstruct,n.containerState]),p(w)}function x(w){if(w===null){r&&E(),k(0),e.consume(w);return}return r=r||n.parser.flow(n.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),b(w)}function b(w){if(w===null){A(e.exit("chunkFlow"),!0),k(0),e.consume(w);return}return L(w)?(e.consume(w),A(e.exit("chunkFlow")),i=0,n.interrupt=void 0,a):(e.consume(w),b)}function A(w,v){const N=n.sliceStream(w);if(v&&N.push(null),w.previous=s,s&&(s.next=w),s=w,r.defineSkip(w.start),r.write(N),n.parser.lazy[w.start.line]){let g=r.events.length;for(;g--;)if(r.events[g][1].start.offset<o&&(!r.events[g][1].end||r.events[g][1].end.offset>o))return;const S=n.events.length;let T=S,F,M;for(;T--;)if(n.events[T][0]==="exit"&&n.events[T][1].type==="chunkFlow"){if(F){M=n.events[T][1].end;break}F=!0}for(k(i),g=S;g<n.events.length;)n.events[g][1].end={...M},g++;se(n.events,T+1,0,n.events.slice(S)),n.events.length=g}}function k(w){let v=t.length;for(;v-- >w;){const N=t[v];n.containerState=N[1],N[0].exit.call(n,e)}t.length=w}function E(){r.write([null]),s=void 0,r=void 0,n.containerState._closeFlow=void 0}}function Cs(e,n,t){return D(e,e.attempt(this.parser.constructs.document,n,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function rt(e){if(e===null||Y(e)||xs(e))return 1;if(ws(e))return 2}function sn(e,n,t){const i=[];let r=-1;for(;++r<e.length;){const s=e[r].resolveAll;s&&!i.includes(s)&&(n=s(n,t),i.push(s))}return n}const zt={name:"attention",resolveAll:Es,tokenize:_s};function Es(e,n){let t=-1,i,r,s,o,a,u,l,c;for(;++t<e.length;)if(e[t][0]==="enter"&&e[t][1].type==="attentionSequence"&&e[t][1]._close){for(i=t;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&n.sliceSerialize(e[i][1]).charCodeAt(0)===n.sliceSerialize(e[t][1]).charCodeAt(0)){if((e[i][1]._close||e[t][1]._open)&&(e[t][1].end.offset-e[t][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[t][1].end.offset-e[t][1].start.offset)%3))continue;u=e[i][1].end.offset-e[i][1].start.offset>1&&e[t][1].end.offset-e[t][1].start.offset>1?2:1;const f={...e[i][1].end},p={...e[t][1].start};Fn(f,-u),Fn(p,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:{...e[i][1].end}},a={type:u>1?"strongSequence":"emphasisSequence",start:{...e[t][1].start},end:p},s={type:u>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[t][1].start}},r={type:u>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},e[i][1].end={...o.start},e[t][1].start={...a.end},l=[],e[i][1].end.offset-e[i][1].start.offset&&(l=W(l,[["enter",e[i][1],n],["exit",e[i][1],n]])),l=W(l,[["enter",r,n],["enter",o,n],["exit",o,n],["enter",s,n]]),l=W(l,sn(n.parser.constructs.insideSpan.null,e.slice(i+1,t),n)),l=W(l,[["exit",s,n],["enter",a,n],["exit",a,n],["exit",r,n]]),e[t][1].end.offset-e[t][1].start.offset?(c=2,l=W(l,[["enter",e[t][1],n],["exit",e[t][1],n]])):c=0,se(e,i-1,t-i+3,l),t=i+l.length-c-2;break}}for(t=-1;++t<e.length;)e[t][1].type==="attentionSequence"&&(e[t][1].type="data");return e}function _s(e,n){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,r=rt(i);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=rt(u),f=!c||c===2&&r||t.includes(u),p=!r||r===2&&c||t.includes(i);return l._open=!!(s===42?f:f&&(r||!p)),l._close=!!(s===42?p:p&&(c||!f)),n(u)}}function Fn(e,n){e.column+=n,e.offset+=n,e._bufferIndex+=n}const Ls={name:"autolink",tokenize:Ns};function Ns(e,n,t){let i=0;return r;function r(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return re(h)?(e.consume(h),o):h===64?t(h):l(h)}function o(h){return h===43||h===45||h===46||te(h)?(i=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),i=0,u):(h===43||h===45||h===46||te(h))&&i++<32?(e.consume(h),a):(i=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),n):h===null||h===32||h===60||Pt(h)?t(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):ys(h)?(e.consume(h),l):t(h)}function c(h){return te(h)?f(h):t(h)}function f(h){return h===46?(e.consume(h),i=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),n):p(h)}function p(h){if((h===45||te(h))&&i++<63){const x=h===45?p:f;return e.consume(h),x}return t(h)}}const dt={partial:!0,tokenize:vs};function vs(e,n,t){return i;function i(s){return z(s)?D(e,r,"linePrefix")(s):r(s)}function r(s){return s===null||L(s)?n(s):t(s)}}const Fi={continuation:{tokenize:Ps},exit:Os,name:"blockQuote",tokenize:Fs};function Fs(e,n,t){const i=this;return r;function r(o){if(o===62){const a=i.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return t(o)}function s(o){return z(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),n):(e.exit("blockQuotePrefix"),n(o))}}function Ps(e,n,t){const i=this;return r;function r(o){return z(o)?D(e,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(Fi,n,t)(o)}}function Os(e){e.exit("blockQuote")}const Pi={name:"characterEscape",tokenize:zs};function zs(e,n,t){return i;function i(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),r}function r(s){return bs(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),n):t(s)}}const Oi={name:"characterReference",tokenize:Bs};function Bs(e,n,t){const i=this;let r=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=te,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=ks,c):(e.enter("characterReferenceValue"),s=7,o=Ot,c(f))}function c(f){if(f===59&&r){const p=e.exit("characterReferenceValue");return o===te&&!rn(i.sliceSerialize(p))?t(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),n)}return o(f)&&r++<s?(e.consume(f),c):t(f)}}const Pn={partial:!0,tokenize:Rs},On={concrete:!0,name:"codeFenced",tokenize:Ms};function Ms(e,n,t){const i=this,r={partial:!0,tokenize:N};let s=0,o=0,a;return u;function u(g){return l(g)}function l(g){const S=i.events[i.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=g,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(g)}function c(g){return g===a?(o++,e.consume(g),c):o<3?t(g):(e.exit("codeFencedFenceSequence"),z(g)?D(e,f,"whitespace")(g):f(g))}function f(g){return g===null||L(g)?(e.exit("codeFencedFence"),i.interrupt?n(g):e.check(Pn,b,v)(g)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===null||L(g)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(g)):z(g)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),D(e,h,"whitespace")(g)):g===96&&g===a?t(g):(e.consume(g),p)}function h(g){return g===null||L(g)?f(g):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(g))}function x(g){return g===null||L(g)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(g)):g===96&&g===a?t(g):(e.consume(g),x)}function b(g){return e.attempt(r,v,A)(g)}function A(g){return e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),k}function k(g){return s>0&&z(g)?D(e,E,"linePrefix",s+1)(g):E(g)}function E(g){return g===null||L(g)?e.check(Pn,b,v)(g):(e.enter("codeFlowValue"),w(g))}function w(g){return g===null||L(g)?(e.exit("codeFlowValue"),E(g)):(e.consume(g),w)}function v(g){return e.exit("codeFenced"),n(g)}function N(g,S,T){let F=0;return M;function M(B){return g.enter("lineEnding"),g.consume(B),g.exit("lineEnding"),_}function _(B){return g.enter("codeFencedFence"),z(B)?D(g,C,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):C(B)}function C(B){return B===a?(g.enter("codeFencedFenceSequence"),R(B)):T(B)}function R(B){return B===a?(F++,g.consume(B),R):F>=o?(g.exit("codeFencedFenceSequence"),z(B)?D(g,q,"whitespace")(B):q(B)):T(B)}function q(B){return B===null||L(B)?(g.exit("codeFencedFence"),S(B)):T(B)}}}function Rs(e,n,t){const i=this;return r;function r(o){return o===null?t(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return i.parser.lazy[i.now().line]?t(o):n(o)}}const xt={name:"codeIndented",tokenize:Ds},$s={partial:!0,tokenize:qs};function Ds(e,n,t){const i=this;return r;function r(l){return e.enter("codeIndented"),D(e,s,"linePrefix",5)(l)}function s(l){const c=i.events[i.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):t(l)}function o(l){return l===null?u(l):L(l)?e.attempt($s,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||L(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),n(l)}}function qs(e,n,t){const i=this;return r;function r(o){return i.parser.lazy[i.now().line]?t(o):L(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),r):D(e,s,"linePrefix",5)(o)}function s(o){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?n(o):L(o)?r(o):t(o)}}const js={name:"codeText",previous:Ks,resolve:Us,tokenize:Vs};function Us(e){let n=e.length-4,t=3,i,r;if((e[t][1].type==="lineEnding"||e[t][1].type==="space")&&(e[n][1].type==="lineEnding"||e[n][1].type==="space")){for(i=t;++i<n;)if(e[i][1].type==="codeTextData"){e[t][1].type="codeTextPadding",e[n][1].type="codeTextPadding",t+=2,n-=2;break}}for(i=t-1,n++;++i<=n;)r===void 0?i!==n&&e[i][1].type!=="lineEnding"&&(r=i):(i===n||e[i][1].type==="lineEnding")&&(e[r][1].type="codeTextData",i!==r+2&&(e[r][1].end=e[i-1][1].end,e.splice(r+2,i-r-2),n-=i-r-2,i=r+2),r=void 0);return e}function Ks(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Vs(e,n,t){let i=0,r,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),i++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?t(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),r=0,c(f)):L(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||L(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),r++,c):r===i?(e.exit("codeTextSequence"),e.exit("codeText"),n(f)):(s.type="codeTextData",l(f))}}class Hs{constructor(n){this.left=n?[...n]:[],this.right=[]}get(n){if(n<0||n>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+n+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return n<this.left.length?this.left[n]:this.right[this.right.length-n+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(n,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(n,i):n>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-n+this.left.length).reverse():this.left.slice(n).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(n,t,i){const r=t||0;this.setCursor(Math.trunc(n));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&De(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(n){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(n)}pushMany(n){this.setCursor(Number.POSITIVE_INFINITY),De(this.left,n)}unshift(n){this.setCursor(0),this.right.push(n)}unshiftMany(n){this.setCursor(0),De(this.right,n.reverse())}setCursor(n){if(!(n===this.left.length||n>this.left.length&&this.right.length===0||n<0&&this.left.length===0))if(n<this.left.length){const t=this.left.splice(n,Number.POSITIVE_INFINITY);De(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-n,Number.POSITIVE_INFINITY);De(this.left,t.reverse())}}}function De(e,n){let t=0;if(n.length<1e4)e.push(...n);else for(;t<n.length;)e.push(...n.slice(t,t+1e4)),t+=1e4}function zi(e){const n={};let t=-1,i,r,s,o,a,u,l;const c=new Hs(e);for(;++t<c.length;){for(;t in n;)t=n[t];if(i=c.get(t),t&&i[1].type==="chunkFlow"&&c.get(t-1)[1].type==="listItemPrefix"&&(u=i[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(n,Ys(c,t)),t=n[t],l=!0);else if(i[1]._container){for(s=t,r=void 0;s--;)if(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(c.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(i[1].end={...c.get(r)[1].start},a=c.slice(r,t),a.unshift(i),c.splice(r,t-r+1,a))}}return se(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function Ys(e,n){const t=e.get(n)[1],i=e.get(n)[2];let r=n-1;const s=[];let o=t._tokenizer;o||(o=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,u=[],l={};let c,f,p=-1,h=t,x=0,b=0;const A=[b];for(;h;){for(;e.get(++r)[1]!==h;);s.push(r),h._tokenizer||(c=i.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=t;++p<a.length;)a[p][0]==="exit"&&a[p-1][0]==="enter"&&a[p][1].type===a[p-1][1].type&&a[p][1].start.line!==a[p][1].end.line&&(b=p+1,A.push(b),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):A.pop(),p=A.length;p--;){const k=a.slice(A[p],A[p+1]),E=s.pop();u.push([E,E+k.length-1]),e.splice(E,2,k)}for(u.reverse(),p=-1;++p<u.length;)l[x+u[p][0]]=x+u[p][1],x+=u[p][1]-u[p][0]-1;return l}const Gs={resolve:Ws,tokenize:Js},Qs={partial:!0,tokenize:Xs};function Ws(e){return zi(e),e}function Js(e,n){let t;return i;function i(a){return e.enter("content"),t=e.enter("chunkContent",{contentType:"content"}),r(a)}function r(a){return a===null?s(a):L(a)?e.check(Qs,o,s)(a):(e.consume(a),r)}function s(a){return e.exit("chunkContent"),e.exit("content"),n(a)}function o(a){return e.consume(a),e.exit("chunkContent"),t.next=e.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function Xs(e,n,t){const i=this;return r;function r(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),D(e,s,"linePrefix")}function s(o){if(o===null||L(o))return t(o);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?n(o):e.interrupt(i.parser.constructs.flow,t,n)(o)}}function Bi(e,n,t,i,r,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(k){return k===60?(e.enter(i),e.enter(r),e.enter(s),e.consume(k),e.exit(s),p):k===null||k===32||k===41||Pt(k)?t(k):(e.enter(i),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),b(k))}function p(k){return k===62?(e.enter(s),e.consume(k),e.exit(s),e.exit(r),e.exit(i),n):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(k))}function h(k){return k===62?(e.exit("chunkString"),e.exit(a),p(k)):k===null||k===60||L(k)?t(k):(e.consume(k),k===92?x:h)}function x(k){return k===60||k===62||k===92?(e.consume(k),h):h(k)}function b(k){return!c&&(k===null||k===41||Y(k))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(i),n(k)):c<l&&k===40?(e.consume(k),c++,b):k===41?(e.consume(k),c--,b):k===null||k===32||k===40||Pt(k)?t(k):(e.consume(k),k===92?A:b)}function A(k){return k===40||k===41||k===92?(e.consume(k),b):b(k)}}function Mi(e,n,t,i,r,s){const o=this;let a=0,u;return l;function l(h){return e.enter(i),e.enter(r),e.consume(h),e.exit(r),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?t(h):h===93?(e.exit(s),e.enter(r),e.consume(h),e.exit(r),e.exit(i),n):L(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||L(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!z(h)),h===92?p:f)}function p(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function Ri(e,n,t,i,r,s){let o;return a;function a(p){return p===34||p===39||p===40?(e.enter(i),e.enter(r),e.consume(p),e.exit(r),o=p===40?41:p,u):t(p)}function u(p){return p===o?(e.enter(r),e.consume(p),e.exit(r),e.exit(i),n):(e.enter(s),l(p))}function l(p){return p===o?(e.exit(s),u(o)):p===null?t(p):L(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),D(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(p))}function c(p){return p===o||p===null||L(p)?(e.exit("chunkString"),l(p)):(e.consume(p),p===92?f:c)}function f(p){return p===o||p===92?(e.consume(p),c):c(p)}}function qe(e,n){let t;return i;function i(r){return L(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t=!0,i):z(r)?D(e,i,t?"linePrefix":"lineSuffix")(r):n(r)}}const Zs={name:"definition",tokenize:to},eo={partial:!0,tokenize:no};function to(e,n,t){const i=this;let r;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return Mi.call(i,e,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return r=Le(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):t(h)}function u(h){return Y(h)?qe(e,l)(h):l(h)}function l(h){return Bi(e,c,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(eo,f,f)(h)}function f(h){return z(h)?D(e,p,"whitespace")(h):p(h)}function p(h){return h===null||L(h)?(e.exit("definition"),i.parser.defined.push(r),n(h)):t(h)}}function no(e,n,t){return i;function i(a){return Y(a)?qe(e,r)(a):t(a)}function r(a){return Ri(e,s,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return z(a)?D(e,o,"whitespace")(a):o(a)}function o(a){return a===null||L(a)?n(a):t(a)}}const io={name:"hardBreakEscape",tokenize:ro};function ro(e,n,t){return i;function i(s){return e.enter("hardBreakEscape"),e.consume(s),r}function r(s){return L(s)?(e.exit("hardBreakEscape"),n(s)):t(s)}}const so={name:"headingAtx",resolve:oo,tokenize:ao};function oo(e,n){let t=e.length-2,i=3,r,s;return e[i][1].type==="whitespace"&&(i+=2),t-2>i&&e[t][1].type==="whitespace"&&(t-=2),e[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&e[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(r={type:"atxHeadingText",start:e[i][1].start,end:e[t][1].end},s={type:"chunkText",start:e[i][1].start,end:e[t][1].end,contentType:"text"},se(e,i,t-i+1,[["enter",r,n],["enter",s,n],["exit",s,n],["exit",r,n]])),e}function ao(e,n,t){let i=0;return r;function r(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&i++<6?(e.consume(c),o):c===null||Y(c)?(e.exit("atxHeadingSequence"),a(c)):t(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||L(c)?(e.exit("atxHeading"),n(c)):z(c)?D(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Y(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const lo=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],zn=["pre","script","style","textarea"],uo={concrete:!0,name:"htmlFlow",resolveTo:ho,tokenize:po},co={partial:!0,tokenize:go},fo={partial:!0,tokenize:mo};function ho(e){let n=e.length;for(;n--&&!(e[n][0]==="enter"&&e[n][1].type==="htmlFlow"););return n>1&&e[n-2][1].type==="linePrefix"&&(e[n][1].start=e[n-2][1].start,e[n+1][1].start=e[n-2][1].start,e.splice(n-2,2)),e}function po(e,n,t){const i=this;let r,s,o,a,u;return l;function l(m){return c(m)}function c(m){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(m),f}function f(m){return m===33?(e.consume(m),p):m===47?(e.consume(m),s=!0,b):m===63?(e.consume(m),r=3,i.interrupt?n:d):re(m)?(e.consume(m),o=String.fromCharCode(m),A):t(m)}function p(m){return m===45?(e.consume(m),r=2,h):m===91?(e.consume(m),r=5,a=0,x):re(m)?(e.consume(m),r=4,i.interrupt?n:d):t(m)}function h(m){return m===45?(e.consume(m),i.interrupt?n:d):t(m)}function x(m){const Z="CDATA[";return m===Z.charCodeAt(a++)?(e.consume(m),a===Z.length?i.interrupt?n:C:x):t(m)}function b(m){return re(m)?(e.consume(m),o=String.fromCharCode(m),A):t(m)}function A(m){if(m===null||m===47||m===62||Y(m)){const Z=m===47,ge=o.toLowerCase();return!Z&&!s&&zn.includes(ge)?(r=1,i.interrupt?n(m):C(m)):lo.includes(o.toLowerCase())?(r=6,Z?(e.consume(m),k):i.interrupt?n(m):C(m)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(m):s?E(m):w(m))}return m===45||te(m)?(e.consume(m),o+=String.fromCharCode(m),A):t(m)}function k(m){return m===62?(e.consume(m),i.interrupt?n:C):t(m)}function E(m){return z(m)?(e.consume(m),E):M(m)}function w(m){return m===47?(e.consume(m),M):m===58||m===95||re(m)?(e.consume(m),v):z(m)?(e.consume(m),w):M(m)}function v(m){return m===45||m===46||m===58||m===95||te(m)?(e.consume(m),v):N(m)}function N(m){return m===61?(e.consume(m),g):z(m)?(e.consume(m),N):w(m)}function g(m){return m===null||m===60||m===61||m===62||m===96?t(m):m===34||m===39?(e.consume(m),u=m,S):z(m)?(e.consume(m),g):T(m)}function S(m){return m===u?(e.consume(m),u=null,F):m===null||L(m)?t(m):(e.consume(m),S)}function T(m){return m===null||m===34||m===39||m===47||m===60||m===61||m===62||m===96||Y(m)?N(m):(e.consume(m),T)}function F(m){return m===47||m===62||z(m)?w(m):t(m)}function M(m){return m===62?(e.consume(m),_):t(m)}function _(m){return m===null||L(m)?C(m):z(m)?(e.consume(m),_):t(m)}function C(m){return m===45&&r===2?(e.consume(m),K):m===60&&r===1?(e.consume(m),j):m===62&&r===4?(e.consume(m),X):m===63&&r===3?(e.consume(m),d):m===93&&r===5?(e.consume(m),oe):L(m)&&(r===6||r===7)?(e.exit("htmlFlowData"),e.check(co,ae,R)(m)):m===null||L(m)?(e.exit("htmlFlowData"),R(m)):(e.consume(m),C)}function R(m){return e.check(fo,q,ae)(m)}function q(m){return e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),B}function B(m){return m===null||L(m)?R(m):(e.enter("htmlFlowData"),C(m))}function K(m){return m===45?(e.consume(m),d):C(m)}function j(m){return m===47?(e.consume(m),o="",J):C(m)}function J(m){if(m===62){const Z=o.toLowerCase();return zn.includes(Z)?(e.consume(m),X):C(m)}return re(m)&&o.length<8?(e.consume(m),o+=String.fromCharCode(m),J):C(m)}function oe(m){return m===93?(e.consume(m),d):C(m)}function d(m){return m===62?(e.consume(m),X):m===45&&r===2?(e.consume(m),d):C(m)}function X(m){return m===null||L(m)?(e.exit("htmlFlowData"),ae(m)):(e.consume(m),X)}function ae(m){return e.exit("htmlFlow"),n(m)}}function mo(e,n,t){const i=this;return r;function r(o){return L(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):t(o)}function s(o){return i.parser.lazy[i.now().line]?t(o):n(o)}}function go(e,n,t){return i;function i(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(dt,n,t)}}const yo={name:"htmlText",tokenize:ko};function ko(e,n,t){const i=this;let r,s,o;return a;function a(d){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(d),u}function u(d){return d===33?(e.consume(d),l):d===47?(e.consume(d),N):d===63?(e.consume(d),w):re(d)?(e.consume(d),T):t(d)}function l(d){return d===45?(e.consume(d),c):d===91?(e.consume(d),s=0,x):re(d)?(e.consume(d),E):t(d)}function c(d){return d===45?(e.consume(d),h):t(d)}function f(d){return d===null?t(d):d===45?(e.consume(d),p):L(d)?(o=f,j(d)):(e.consume(d),f)}function p(d){return d===45?(e.consume(d),h):f(d)}function h(d){return d===62?K(d):d===45?p(d):f(d)}function x(d){const X="CDATA[";return d===X.charCodeAt(s++)?(e.consume(d),s===X.length?b:x):t(d)}function b(d){return d===null?t(d):d===93?(e.consume(d),A):L(d)?(o=b,j(d)):(e.consume(d),b)}function A(d){return d===93?(e.consume(d),k):b(d)}function k(d){return d===62?K(d):d===93?(e.consume(d),k):b(d)}function E(d){return d===null||d===62?K(d):L(d)?(o=E,j(d)):(e.consume(d),E)}function w(d){return d===null?t(d):d===63?(e.consume(d),v):L(d)?(o=w,j(d)):(e.consume(d),w)}function v(d){return d===62?K(d):w(d)}function N(d){return re(d)?(e.consume(d),g):t(d)}function g(d){return d===45||te(d)?(e.consume(d),g):S(d)}function S(d){return L(d)?(o=S,j(d)):z(d)?(e.consume(d),S):K(d)}function T(d){return d===45||te(d)?(e.consume(d),T):d===47||d===62||Y(d)?F(d):t(d)}function F(d){return d===47?(e.consume(d),K):d===58||d===95||re(d)?(e.consume(d),M):L(d)?(o=F,j(d)):z(d)?(e.consume(d),F):K(d)}function M(d){return d===45||d===46||d===58||d===95||te(d)?(e.consume(d),M):_(d)}function _(d){return d===61?(e.consume(d),C):L(d)?(o=_,j(d)):z(d)?(e.consume(d),_):F(d)}function C(d){return d===null||d===60||d===61||d===62||d===96?t(d):d===34||d===39?(e.consume(d),r=d,R):L(d)?(o=C,j(d)):z(d)?(e.consume(d),C):(e.consume(d),q)}function R(d){return d===r?(e.consume(d),r=void 0,B):d===null?t(d):L(d)?(o=R,j(d)):(e.consume(d),R)}function q(d){return d===null||d===34||d===39||d===60||d===61||d===96?t(d):d===47||d===62||Y(d)?F(d):(e.consume(d),q)}function B(d){return d===47||d===62||Y(d)?F(d):t(d)}function K(d){return d===62?(e.consume(d),e.exit("htmlTextData"),e.exit("htmlText"),n):t(d)}function j(d){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),J}function J(d){return z(d)?D(e,oe,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d):oe(d)}function oe(d){return e.enter("htmlTextData"),o(d)}}const on={name:"labelEnd",resolveAll:So,resolveTo:Io,tokenize:To},bo={tokenize:Ao},wo={tokenize:Co},xo={tokenize:Eo};function So(e){let n=-1;const t=[];for(;++n<e.length;){const i=e[n][1];if(t.push(e[n]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",n+=r}}return e.length!==t.length&&se(e,0,e.length,t),e}function Io(e,n){let t=e.length,i=0,r,s,o,a;for(;t--;)if(r=e[t][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;e[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(e[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=t,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(o=t);const u={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},l={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},c={type:"labelText",start:{...e[s+i+2][1].end},end:{...e[o-2][1].start}};return a=[["enter",u,n],["enter",l,n]],a=W(a,e.slice(s+1,s+i+3)),a=W(a,[["enter",c,n]]),a=W(a,sn(n.parser.constructs.insideSpan.null,e.slice(s+i+4,o-3),n)),a=W(a,[["exit",c,n],e[o-2],e[o-1],["exit",l,n]]),a=W(a,e.slice(o+1)),a=W(a,[["exit",u,n]]),se(e,s,e.length,a),e}function To(e,n,t){const i=this;let r=i.events.length,s,o;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){s=i.events[r][1];break}return a;function a(p){return s?s._inactive?f(p):(o=i.parser.defined.includes(Le(i.sliceSerialize({start:s.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(p),e.exit("labelMarker"),e.exit("labelEnd"),u):t(p)}function u(p){return p===40?e.attempt(bo,c,o?c:f)(p):p===91?e.attempt(wo,c,o?l:f)(p):o?c(p):f(p)}function l(p){return e.attempt(xo,c,f)(p)}function c(p){return n(p)}function f(p){return s._balanced=!0,t(p)}}function Ao(e,n,t){return i;function i(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),r}function r(f){return Y(f)?qe(e,s)(f):s(f)}function s(f){return f===41?c(f):Bi(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Y(f)?qe(e,u)(f):c(f)}function a(f){return t(f)}function u(f){return f===34||f===39||f===40?Ri(e,l,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Y(f)?qe(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),n):t(f)}}function Co(e,n,t){const i=this;return r;function r(a){return Mi.call(i,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return i.parser.defined.includes(Le(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?n(a):t(a)}function o(a){return t(a)}}function Eo(e,n,t){return i;function i(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),r}function r(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),n):t(s)}}const _o={name:"labelStartImage",resolveAll:on.resolveAll,tokenize:Lo};function Lo(e,n,t){const i=this;return r;function r(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):t(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(a):n(a)}}const No={name:"labelStartLink",resolveAll:on.resolveAll,tokenize:vo};function vo(e,n,t){const i=this;return r;function r(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(o):n(o)}}const St={name:"lineEnding",tokenize:Fo};function Fo(e,n){return t;function t(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),D(e,n,"linePrefix")}}const nt={name:"thematicBreak",tokenize:Po};function Po(e,n,t){let i=0,r;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return r=l,a(l)}function a(l){return l===r?(e.enter("thematicBreakSequence"),u(l)):i>=3&&(l===null||L(l))?(e.exit("thematicBreak"),n(l)):t(l)}function u(l){return l===r?(e.consume(l),i++,u):(e.exit("thematicBreakSequence"),z(l)?D(e,a,"whitespace")(l):a(l))}}const H={continuation:{tokenize:Mo},exit:$o,name:"list",tokenize:Bo},Oo={partial:!0,tokenize:Do},zo={partial:!0,tokenize:Ro};function Bo(e,n,t){const i=this,r=i.events[i.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return a;function a(h){const x=i.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!i.containerState.marker||h===i.containerState.marker:Ot(h)){if(i.containerState.type||(i.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(nt,t,l)(h):l(h);if(!i.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return t(h)}function u(h){return Ot(h)&&++o<10?(e.consume(h),u):(!i.interrupt||o<2)&&(i.containerState.marker?h===i.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):t(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||h,e.check(dt,i.interrupt?t:c,e.attempt(Oo,p,f))}function c(h){return i.containerState.initialBlankLine=!0,s++,p(h)}function f(h){return z(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),p):t(h)}function p(h){return i.containerState.size=s+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,n(h)}}function Mo(e,n,t){const i=this;return i.containerState._closeFlow=void 0,e.check(dt,r,s);function r(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,D(e,n,"listItemIndent",i.containerState.size+1)(a)}function s(a){return i.containerState.furtherBlankLines||!z(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,o(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(zo,n,o)(a))}function o(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,D(e,e.attempt(H,n,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Ro(e,n,t){const i=this;return D(e,r,"listItemIndent",i.containerState.size+1);function r(s){const o=i.events[i.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===i.containerState.size?n(s):t(s)}}function $o(e){e.exit(this.containerState.type)}function Do(e,n,t){const i=this;return D(e,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const o=i.events[i.events.length-1];return!z(s)&&o&&o[1].type==="listItemPrefixWhitespace"?n(s):t(s)}}const Bn={name:"setextUnderline",resolveTo:qo,tokenize:jo};function qo(e,n){let t=e.length,i,r,s;for(;t--;)if(e[t][0]==="enter"){if(e[t][1].type==="content"){i=t;break}e[t][1].type==="paragraph"&&(r=t)}else e[t][1].type==="content"&&e.splice(t,1),!s&&e[t][1].type==="definition"&&(s=t);const o={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[r][1].type="setextHeadingText",s?(e.splice(r,0,["enter",o,n]),e.splice(s+1,0,["exit",e[i][1],n]),e[i][1].end={...e[s][1].end}):e[i][1]=o,e.push(["exit",o,n]),e}function jo(e,n,t){const i=this;let r;return s;function s(l){let c=i.events.length,f;for(;c--;)if(i.events[c][1].type!=="lineEnding"&&i.events[c][1].type!=="linePrefix"&&i.events[c][1].type!=="content"){f=i.events[c][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||f)?(e.enter("setextHeadingLine"),r=l,o(l)):t(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===r?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),z(l)?D(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||L(l)?(e.exit("setextHeadingLine"),n(l)):t(l)}}const Uo={tokenize:Ko};function Ko(e){const n=this,t=e.attempt(dt,i,e.attempt(this.parser.constructs.flowInitial,r,D(e,e.attempt(this.parser.constructs.flow,r,e.attempt(Gs,r)),"linePrefix")));return t;function i(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),n.currentConstruct=void 0,t}function r(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n.currentConstruct=void 0,t}}const Vo={resolveAll:Di()},Ho=$i("string"),Yo=$i("text");function $i(e){return{resolveAll:Di(e==="text"?Go:void 0),tokenize:n};function n(t){const i=this,r=this.parser.constructs[e],s=t.attempt(r,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){t.consume(c);return}return t.enter("data"),t.consume(c),u}function u(c){return l(c)?(t.exit("data"),s(c)):(t.consume(c),u)}function l(c){if(c===null)return!0;const f=r[c];let p=-1;if(f)for(;++p<f.length;){const h=f[p];if(!h.previous||h.previous.call(i,i.previous))return!0}return!1}}}function Di(e){return n;function n(t,i){let r=-1,s;for(;++r<=t.length;)s===void 0?t[r]&&t[r][1].type==="data"&&(s=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),r=s+2),s=void 0);return e?e(t,i):t}}function Go(e,n){let t=0;for(;++t<=e.length;)if((t===e.length||e[t][1].type==="lineEnding")&&e[t-1][1].type==="data"){const i=e[t-1][1],r=n.sliceStream(i);let s=r.length,o=-1,a=0,u;for(;s--;){const l=r[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(n._contentTypeTextTrailing&&t===e.length&&(a=0),a){const l={type:t===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:i.start._bufferIndex+o,_index:i.start._index+s,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...l.start},i.start.offset===i.end.offset?Object.assign(i,l):(e.splice(t,0,["enter",l,n],["exit",l,n]),t+=2)}t++}return e}const Qo={42:H,43:H,45:H,48:H,49:H,50:H,51:H,52:H,53:H,54:H,55:H,56:H,57:H,62:Fi},Wo={91:Zs},Jo={[-2]:xt,[-1]:xt,32:xt},Xo={35:so,42:nt,45:[Bn,nt],60:uo,61:Bn,95:nt,96:On,126:On},Zo={38:Oi,92:Pi},ea={[-5]:St,[-4]:St,[-3]:St,33:_o,38:Oi,42:zt,60:[Ls,yo],91:No,92:[io,Pi],93:on,95:zt,96:js},ta={null:[zt,Vo]},na={null:[42,95]},ia={null:[]},ra=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:na,contentInitial:Wo,disable:ia,document:Qo,flow:Xo,flowInitial:Jo,insideSpan:ta,string:Zo,text:ea},Symbol.toStringTag,{value:"Module"}));function sa(e,n,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},s=[];let o=[],a=[];const u={attempt:S(N),check:S(g),consume:E,enter:w,exit:v,interrupt:S(g,{interrupt:!0})},l={code:null,containerState:{},defineSkip:b,events:[],now:x,parser:e,previous:null,sliceSerialize:p,sliceStream:h,write:f};let c=n.tokenize.call(l,u);return n.resolveAll&&s.push(n),l;function f(_){return o=W(o,_),A(),o[o.length-1]!==null?[]:(T(n,0),l.events=sn(s,l.events,l),l.events)}function p(_,C){return aa(h(_),C)}function h(_){return oa(o,_)}function x(){const{_bufferIndex:_,_index:C,line:R,column:q,offset:B}=i;return{_bufferIndex:_,_index:C,line:R,column:q,offset:B}}function b(_){r[_.line]=_.column,M()}function A(){let _;for(;i._index<o.length;){const C=o[i._index];if(typeof C=="string")for(_=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===_&&i._bufferIndex<C.length;)k(C.charCodeAt(i._bufferIndex));else k(C)}}function k(_){c=c(_)}function E(_){L(_)?(i.line++,i.column=1,i.offset+=_===-3?2:1,M()):_!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===o[i._index].length&&(i._bufferIndex=-1,i._index++)),l.previous=_}function w(_,C){const R=C||{};return R.type=_,R.start=x(),l.events.push(["enter",R,l]),a.push(R),R}function v(_){const C=a.pop();return C.end=x(),l.events.push(["exit",C,l]),C}function N(_,C){T(_,C.from)}function g(_,C){C.restore()}function S(_,C){return R;function R(q,B,K){let j,J,oe,d;return Array.isArray(q)?ae(q):"tokenize"in q?ae([q]):X(q);function X(U){return Be;function Be(ce){const Se=ce!==null&&U[ce],Ie=ce!==null&&U.null,Ye=[...Array.isArray(Se)?Se:Se?[Se]:[],...Array.isArray(Ie)?Ie:Ie?[Ie]:[]];return ae(Ye)(ce)}}function ae(U){return j=U,J=0,U.length===0?K:m(U[J])}function m(U){return Be;function Be(ce){return d=F(),oe=U,U.partial||(l.currentConstruct=U),U.name&&l.parser.constructs.disable.null.includes(U.name)?ge():U.tokenize.call(C?Object.assign(Object.create(l),C):l,u,Z,ge)(ce)}}function Z(U){return _(oe,d),B}function ge(U){return d.restore(),++J<j.length?m(j[J]):K}}}function T(_,C){_.resolveAll&&!s.includes(_)&&s.push(_),_.resolve&&se(l.events,C,l.events.length-C,_.resolve(l.events.slice(C),l)),_.resolveTo&&(l.events=_.resolveTo(l.events,l))}function F(){const _=x(),C=l.previous,R=l.currentConstruct,q=l.events.length,B=Array.from(a);return{from:q,restore:K};function K(){i=_,l.previous=C,l.currentConstruct=R,l.events.length=q,a=B,M()}}function M(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function oa(e,n){const t=n.start._index,i=n.start._bufferIndex,r=n.end._index,s=n.end._bufferIndex;let o;if(t===r)o=[e[t].slice(i,s)];else{if(o=e.slice(t,r),i>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(i):o.shift()}s>0&&o.push(e[r].slice(0,s))}return o}function aa(e,n){let t=-1;const i=[];let r;for(;++t<e.length;){const s=e[t];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=n?" ":"	";break}case-1:{if(!n&&r)continue;o=" ";break}default:o=String.fromCharCode(s)}r=s===-2,i.push(o)}return i.join("")}function la(e){const i={constructs:ds([ra,...(e||{}).extensions||[]]),content:r(Ss),defined:[],document:r(Ts),flow:r(Uo),lazy:{},string:r(Ho),text:r(Yo)};return i;function r(s){return o;function o(a){return sa(i,s,a)}}}function ua(e){for(;!zi(e););return e}const Mn=/[\0\t\n\r]/g;function ca(){let e=1,n="",t=!0,i;return r;function r(s,o,a){const u=[];let l,c,f,p,h;for(s=n+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,n="",t&&(s.charCodeAt(0)===65279&&f++,t=void 0);f<s.length;){if(Mn.lastIndex=f,l=Mn.exec(s),p=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(p),!l){n=s.slice(f);break}if(h===10&&f===p&&i)u.push(-3),i=void 0;else switch(i&&(u.push(-5),i=void 0),f<p&&(u.push(s.slice(f,p)),e+=p-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:i=!0,e=1}f=p+1}return a&&(i&&u.push(-5),n&&u.push(n),u.push(null)),u}}const fa=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function qi(e){return e.replace(fa,ha)}function ha(e,n,t){if(n)return n;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),s=r===120||r===88;return vi(t.slice(s?2:1),s?16:10)}return rn(t)||e}function je(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Rn(e.position):"start"in e||"end"in e?Rn(e):"line"in e||"column"in e?Bt(e):""}function Bt(e){return $n(e&&e.line)+":"+$n(e&&e.column)}function Rn(e){return Bt(e&&e.start)+"-"+Bt(e&&e.end)}function $n(e){return e&&typeof e=="number"?e:1}const ji={}.hasOwnProperty;function pa(e,n,t){return typeof n!="string"&&(t=n,n=void 0),da(t)(ua(la(t).document().write(ca()(e,n,!0))))}function da(e){const n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(dn),autolinkProtocol:F,autolinkEmail:F,atxHeading:s(fn),blockQuote:s(Ie),characterEscape:F,characterReference:F,codeFenced:s(Ye),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ye,o),codeText:s(sr,o),codeTextData:F,data:F,codeFlowValue:F,definition:s(or),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ar),hardBreakEscape:s(hn),hardBreakTrailing:s(hn),htmlFlow:s(pn,o),htmlFlowData:F,htmlText:s(pn,o),htmlTextData:F,image:s(lr),label:o,link:s(dn),listItem:s(ur),listItemValue:p,listOrdered:s(mn,f),listUnordered:s(mn),paragraph:s(cr),reference:m,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(fn),strong:s(fr),thematicBreak:s(pr)},exit:{atxHeading:u(),atxHeadingSequence:N,autolink:u(),autolinkEmail:Se,autolinkProtocol:ce,blockQuote:u(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:ge,characterReferenceMarkerNumeric:ge,characterReferenceValue:U,characterReference:Be,codeFenced:u(A),codeFencedFence:b,codeFencedFenceInfo:h,codeFencedFenceMeta:x,codeFlowValue:M,codeIndented:u(k),codeText:u(B),codeTextData:M,data:M,definition:u(),definitionDestinationString:v,definitionLabelString:E,definitionTitleString:w,emphasis:u(),hardBreakEscape:u(C),hardBreakTrailing:u(C),htmlFlow:u(R),htmlFlowData:M,htmlText:u(q),htmlTextData:M,image:u(j),label:oe,labelText:J,lineEnding:_,link:u(K),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:Z,resourceDestinationString:d,resourceTitleString:X,resource:ae,setextHeading:u(T),setextHeadingLineSequence:S,setextHeadingText:g,strong:u(),thematicBreak:u()}};Ui(n,(e||{}).mdastExtensions||[]);const t={};return i;function i(y){let I={type:"root",children:[]};const P={stack:[I],tokenStack:[],config:n,enter:a,exit:l,buffer:o,resume:c,data:t},O=[];let $=-1;for(;++$<y.length;)if(y[$][1].type==="listOrdered"||y[$][1].type==="listUnordered")if(y[$][0]==="enter")O.push($);else{const ee=O.pop();$=r(y,ee,$)}for($=-1;++$<y.length;){const ee=n[y[$][0]];ji.call(ee,y[$][1].type)&&ee[y[$][1].type].call(Object.assign({sliceSerialize:y[$][2].sliceSerialize},P),y[$][1])}if(P.tokenStack.length>0){const ee=P.tokenStack[P.tokenStack.length-1];(ee[1]||Dn).call(P,void 0,ee[0])}for(I.position={start:fe(y.length>0?y[0][1].start:{line:1,column:1,offset:0}),end:fe(y.length>0?y[y.length-2][1].end:{line:1,column:1,offset:0})},$=-1;++$<n.transforms.length;)I=n.transforms[$](I)||I;return I}function r(y,I,P){let O=I-1,$=-1,ee=!1,ye,le,Me,Re;for(;++O<=P;){const Q=y[O];switch(Q[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Q[0]==="enter"?$++:$--,Re=void 0;break}case"lineEndingBlank":{Q[0]==="enter"&&(ye&&!Re&&!$&&!Me&&(Me=O),Re=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Re=void 0}if(!$&&Q[0]==="enter"&&Q[1].type==="listItemPrefix"||$===-1&&Q[0]==="exit"&&(Q[1].type==="listUnordered"||Q[1].type==="listOrdered")){if(ye){let Te=O;for(le=void 0;Te--;){const ue=y[Te];if(ue[1].type==="lineEnding"||ue[1].type==="lineEndingBlank"){if(ue[0]==="exit")continue;le&&(y[le][1].type="lineEndingBlank",ee=!0),ue[1].type="lineEnding",le=Te}else if(!(ue[1].type==="linePrefix"||ue[1].type==="blockQuotePrefix"||ue[1].type==="blockQuotePrefixWhitespace"||ue[1].type==="blockQuoteMarker"||ue[1].type==="listItemIndent"))break}Me&&(!le||Me<le)&&(ye._spread=!0),ye.end=Object.assign({},le?y[le][1].start:Q[1].end),y.splice(le||O,0,["exit",ye,Q[2]]),O++,P++}if(Q[1].type==="listItemPrefix"){const Te={type:"listItem",_spread:!1,start:Object.assign({},Q[1].start),end:void 0};ye=Te,y.splice(O,0,["enter",Te,Q[2]]),O++,P++,Me=void 0,Re=!0}}}return y[I][1]._spread=ee,P}function s(y,I){return P;function P(O){a.call(this,y(O),O),I&&I.call(this,O)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(y,I,P){this.stack[this.stack.length-1].children.push(y),this.stack.push(y),this.tokenStack.push([I,P||void 0]),y.position={start:fe(I.start),end:void 0}}function u(y){return I;function I(P){y&&y.call(this,P),l.call(this,P)}}function l(y,I){const P=this.stack.pop(),O=this.tokenStack.pop();if(O)O[0].type!==y.type&&(I?I.call(this,y,O[0]):(O[1]||Dn).call(this,y,O[0]));else throw new Error("Cannot close `"+y.type+"` ("+je({start:y.start,end:y.end})+"): its not open");P.position.end=fe(y.end)}function c(){return nn(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function p(y){if(this.data.expectingFirstListItemValue){const I=this.stack[this.stack.length-2];I.start=Number.parseInt(this.sliceSerialize(y),10),this.data.expectingFirstListItemValue=void 0}}function h(){const y=this.resume(),I=this.stack[this.stack.length-1];I.lang=y}function x(){const y=this.resume(),I=this.stack[this.stack.length-1];I.meta=y}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function A(){const y=this.resume(),I=this.stack[this.stack.length-1];I.value=y.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const y=this.resume(),I=this.stack[this.stack.length-1];I.value=y.replace(/(\r?\n|\r)$/g,"")}function E(y){const I=this.resume(),P=this.stack[this.stack.length-1];P.label=I,P.identifier=Le(this.sliceSerialize(y)).toLowerCase()}function w(){const y=this.resume(),I=this.stack[this.stack.length-1];I.title=y}function v(){const y=this.resume(),I=this.stack[this.stack.length-1];I.url=y}function N(y){const I=this.stack[this.stack.length-1];if(!I.depth){const P=this.sliceSerialize(y).length;I.depth=P}}function g(){this.data.setextHeadingSlurpLineEnding=!0}function S(y){const I=this.stack[this.stack.length-1];I.depth=this.sliceSerialize(y).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function F(y){const P=this.stack[this.stack.length-1].children;let O=P[P.length-1];(!O||O.type!=="text")&&(O=hr(),O.position={start:fe(y.start),end:void 0},P.push(O)),this.stack.push(O)}function M(y){const I=this.stack.pop();I.value+=this.sliceSerialize(y),I.position.end=fe(y.end)}function _(y){const I=this.stack[this.stack.length-1];if(this.data.atHardBreak){const P=I.children[I.children.length-1];P.position.end=fe(y.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&n.canContainEols.includes(I.type)&&(F.call(this,y),M.call(this,y))}function C(){this.data.atHardBreak=!0}function R(){const y=this.resume(),I=this.stack[this.stack.length-1];I.value=y}function q(){const y=this.resume(),I=this.stack[this.stack.length-1];I.value=y}function B(){const y=this.resume(),I=this.stack[this.stack.length-1];I.value=y}function K(){const y=this.stack[this.stack.length-1];if(this.data.inReference){const I=this.data.referenceType||"shortcut";y.type+="Reference",y.referenceType=I,delete y.url,delete y.title}else delete y.identifier,delete y.label;this.data.referenceType=void 0}function j(){const y=this.stack[this.stack.length-1];if(this.data.inReference){const I=this.data.referenceType||"shortcut";y.type+="Reference",y.referenceType=I,delete y.url,delete y.title}else delete y.identifier,delete y.label;this.data.referenceType=void 0}function J(y){const I=this.sliceSerialize(y),P=this.stack[this.stack.length-2];P.label=qi(I),P.identifier=Le(I).toLowerCase()}function oe(){const y=this.stack[this.stack.length-1],I=this.resume(),P=this.stack[this.stack.length-1];if(this.data.inReference=!0,P.type==="link"){const O=y.children;P.children=O}else P.alt=I}function d(){const y=this.resume(),I=this.stack[this.stack.length-1];I.url=y}function X(){const y=this.resume(),I=this.stack[this.stack.length-1];I.title=y}function ae(){this.data.inReference=void 0}function m(){this.data.referenceType="collapsed"}function Z(y){const I=this.resume(),P=this.stack[this.stack.length-1];P.label=I,P.identifier=Le(this.sliceSerialize(y)).toLowerCase(),this.data.referenceType="full"}function ge(y){this.data.characterReferenceType=y.type}function U(y){const I=this.sliceSerialize(y),P=this.data.characterReferenceType;let O;P?(O=vi(I,P==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):O=rn(I);const $=this.stack[this.stack.length-1];$.value+=O}function Be(y){const I=this.stack.pop();I.position.end=fe(y.end)}function ce(y){M.call(this,y);const I=this.stack[this.stack.length-1];I.url=this.sliceSerialize(y)}function Se(y){M.call(this,y);const I=this.stack[this.stack.length-1];I.url="mailto:"+this.sliceSerialize(y)}function Ie(){return{type:"blockquote",children:[]}}function Ye(){return{type:"code",lang:null,meta:null,value:""}}function sr(){return{type:"inlineCode",value:""}}function or(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ar(){return{type:"emphasis",children:[]}}function fn(){return{type:"heading",depth:0,children:[]}}function hn(){return{type:"break"}}function pn(){return{type:"html",value:""}}function lr(){return{type:"image",title:null,url:"",alt:null}}function dn(){return{type:"link",title:null,url:"",children:[]}}function mn(y){return{type:"list",ordered:y.type==="listOrdered",start:null,spread:y._spread,children:[]}}function ur(y){return{type:"listItem",spread:y._spread,checked:null,children:[]}}function cr(){return{type:"paragraph",children:[]}}function fr(){return{type:"strong",children:[]}}function hr(){return{type:"text",value:""}}function pr(){return{type:"thematicBreak"}}}function fe(e){return{line:e.line,column:e.column,offset:e.offset}}function Ui(e,n){let t=-1;for(;++t<n.length;){const i=n[t];Array.isArray(i)?Ui(e,i):ma(e,i)}}function ma(e,n){let t;for(t in n)if(ji.call(n,t))switch(t){case"canContainEols":{const i=n[t];i&&e[t].push(...i);break}case"transforms":{const i=n[t];i&&e[t].push(...i);break}case"enter":case"exit":{const i=n[t];i&&Object.assign(e[t],i);break}}}function Dn(e,n){throw e?new Error("Cannot close `"+e.type+"` ("+je({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+je({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+je({start:n.start,end:n.end})+") is still open")}function ga(e){const n=this;n.parser=t;function t(i){return pa(i,{...n.data("settings"),...e,extensions:n.data("micromarkExtensions")||[],mdastExtensions:n.data("fromMarkdownExtensions")||[]})}}const qn={}.hasOwnProperty;function ya(e,n){const t=n||{};function i(r,...s){let o=i.invalid;const a=i.handlers;if(r&&qn.call(r,e)){const u=String(r[e]);o=qn.call(a,u)?a[u]:i.unknown}if(o)return o.call(this,r,...s)}return i.handlers=t.handlers||{},i.invalid=t.invalid,i.unknown=t.unknown,i}const ka={}.hasOwnProperty;function Ki(e,n){let t=-1,i;if(n.extensions)for(;++t<n.extensions.length;)Ki(e,n.extensions[t]);for(i in n)if(ka.call(n,i))switch(i){case"extensions":break;case"unsafe":{jn(e[i],n[i]);break}case"join":{jn(e[i],n[i]);break}case"handlers":{ba(e[i],n[i]);break}default:e.options[i]=n[i]}return e}function jn(e,n){n&&e.push(...n)}function ba(e,n){n&&Object.assign(e,n)}function wa(e,n,t,i){const r=t.enter("blockquote"),s=t.createTracker(i);s.move("> "),s.shift(2);const o=t.indentLines(t.containerFlow(e,s.current()),xa);return r(),o}function xa(e,n,t){return">"+(t?"":" ")+e}function Vi(e,n){return Un(e,n.inConstruct,!0)&&!Un(e,n.notInConstruct,!1)}function Un(e,n,t){if(typeof n=="string"&&(n=[n]),!n||n.length===0)return t;let i=-1;for(;++i<n.length;)if(e.includes(n[i]))return!0;return!1}function Kn(e,n,t,i){let r=-1;for(;++r<t.unsafe.length;)if(t.unsafe[r].character===`
`&&Vi(t.stack,t.unsafe[r]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function Sa(e,n){const t=String(e);let i=t.indexOf(n),r=i,s=0,o=0;if(typeof n!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===r?++s>o&&(o=s):s=1,r=i+n.length,i=t.indexOf(n,r);return o}function Mt(e,n){return!!(n.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Ia(e){const n=e.options.fence||"`";if(n!=="`"&&n!=="~")throw new Error("Cannot serialize code with `"+n+"` for `options.fence`, expected `` ` `` or `~`");return n}function Ta(e,n,t,i){const r=Ia(t),s=e.value||"",o=r==="`"?"GraveAccent":"Tilde";if(Mt(e,t)){const f=t.enter("codeIndented"),p=t.indentLines(s,Aa);return f(),p}const a=t.createTracker(i),u=r.repeat(Math.max(Sa(s,r)+1,3)),l=t.enter("codeFenced");let c=a.move(u);if(e.lang){const f=t.enter(`codeFencedLang${o}`);c+=a.move(t.safe(e.lang,{before:c,after:" ",encode:["`"],...a.current()})),f()}if(e.lang&&e.meta){const f=t.enter(`codeFencedMeta${o}`);c+=a.move(" "),c+=a.move(t.safe(e.meta,{before:c,after:`
`,encode:["`"],...a.current()})),f()}return c+=a.move(`
`),s&&(c+=a.move(s+`
`)),c+=a.move(u),l(),c}function Aa(e,n,t){return(t?"":"    ")+e}function an(e){const n=e.options.quote||'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize title with `"+n+"` for `options.quote`, expected `\"`, or `'`");return n}function Ca(e,n,t,i){const r=an(t),s=r==='"'?"Quote":"Apostrophe",o=t.enter("definition");let a=t.enter("label");const u=t.createTracker(i);let l=u.move("[");return l+=u.move(t.safe(t.associationId(e),{before:l,after:"]",...u.current()})),l+=u.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=t.enter("destinationLiteral"),l+=u.move("<"),l+=u.move(t.safe(e.url,{before:l,after:">",...u.current()})),l+=u.move(">")):(a=t.enter("destinationRaw"),l+=u.move(t.safe(e.url,{before:l,after:e.title?" ":`
`,...u.current()}))),a(),e.title&&(a=t.enter(`title${s}`),l+=u.move(" "+r),l+=u.move(t.safe(e.title,{before:l,after:r,...u.current()})),l+=u.move(r),a()),o(),l}function Ea(e){const n=e.options.emphasis||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize emphasis with `"+n+"` for `options.emphasis`, expected `*`, or `_`");return n}function de(e){return"&#x"+e.toString(16).toUpperCase()+";"}function st(e,n,t){const i=rt(e),r=rt(n);return i===void 0?r===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Hi.peek=_a;function Hi(e,n,t,i){const r=Ea(t),s=t.enter("emphasis"),o=t.createTracker(i),a=o.move(r);let u=o.move(t.containerPhrasing(e,{after:r,before:a,...o.current()}));const l=u.charCodeAt(0),c=st(i.before.charCodeAt(i.before.length-1),l,r);c.inside&&(u=de(l)+u.slice(1));const f=u.charCodeAt(u.length-1),p=st(i.after.charCodeAt(0),f,r);p.inside&&(u=u.slice(0,-1)+de(f));const h=o.move(r);return s(),t.attentionEncodeSurroundingInfo={after:p.outside,before:c.outside},a+u+h}function _a(e,n,t){return t.options.emphasis||"*"}const mt=function(e){if(e==null)return Fa;if(typeof e=="function")return gt(e);if(typeof e=="object")return Array.isArray(e)?La(e):Na(e);if(typeof e=="string")return va(e);throw new Error("Expected function, string, or object as test")};function La(e){const n=[];let t=-1;for(;++t<e.length;)n[t]=mt(e[t]);return gt(i);function i(...r){let s=-1;for(;++s<n.length;)if(n[s].apply(this,r))return!0;return!1}}function Na(e){const n=e;return gt(t);function t(i){const r=i;let s;for(s in e)if(r[s]!==n[s])return!1;return!0}}function va(e){return gt(n);function n(t){return t&&t.type===e}}function gt(e){return n;function n(t,i,r){return!!(Pa(t)&&e.call(this,t,typeof i=="number"?i:void 0,r||void 0))}}function Fa(){return!0}function Pa(e){return e!==null&&typeof e=="object"&&"type"in e}const Yi=[],Oa=!0,Rt=!1,za="skip";function Ba(e,n,t,i){let r;typeof n=="function"&&typeof t!="function"?(i=t,t=n):r=n;const s=mt(r),o=i?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return p;function p(){let h=Yi,x,b,A;if((!n||s(u,l,c[c.length-1]||void 0))&&(h=Ma(t(u,c)),h[0]===Rt))return h;if("children"in u&&u.children){const k=u;if(k.children&&h[0]!==za)for(b=(i?k.children.length:-1)+o,A=c.concat(k);b>-1&&b<k.children.length;){const E=k.children[b];if(x=a(E,b,A)(),x[0]===Rt)return x;b=typeof x[1]=="number"?x[1]:b+o}}return h}}}function Ma(e){return Array.isArray(e)?e:typeof e=="number"?[Oa,e]:e==null?Yi:[e]}function Ra(e,n,t,i){let r,s,o;typeof n=="function"&&typeof t!="function"?(s=void 0,o=n,r=t):(s=n,o=t,r=i),Ba(e,s,a,r);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}function Gi(e,n){let t=!1;return Ra(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return t=!0,Rt}),!!((!e.depth||e.depth<3)&&nn(e)&&(n.options.setext||t))}function $a(e,n,t,i){const r=Math.max(Math.min(6,e.depth||1),1),s=t.createTracker(i);if(Gi(e,t)){const c=t.enter("headingSetext"),f=t.enter("phrasing"),p=t.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return f(),c(),p+`
`+(r===1?"=":"-").repeat(p.length-(Math.max(p.lastIndexOf("\r"),p.lastIndexOf(`
`))+1))}const o="#".repeat(r),a=t.enter("headingAtx"),u=t.enter("phrasing");s.move(o+" ");let l=t.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(l)&&(l=de(l.charCodeAt(0))+l.slice(1)),l=l?o+" "+l:o,t.options.closeAtx&&(l+=" "+o),u(),a(),l}Qi.peek=Da;function Qi(e){return e.value||""}function Da(){return"<"}Wi.peek=qa;function Wi(e,n,t,i){const r=an(t),s=r==='"'?"Quote":"Apostrophe",o=t.enter("image");let a=t.enter("label");const u=t.createTracker(i);let l=u.move("![");return l+=u.move(t.safe(e.alt,{before:l,after:"]",...u.current()})),l+=u.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=t.enter("destinationLiteral"),l+=u.move("<"),l+=u.move(t.safe(e.url,{before:l,after:">",...u.current()})),l+=u.move(">")):(a=t.enter("destinationRaw"),l+=u.move(t.safe(e.url,{before:l,after:e.title?" ":")",...u.current()}))),a(),e.title&&(a=t.enter(`title${s}`),l+=u.move(" "+r),l+=u.move(t.safe(e.title,{before:l,after:r,...u.current()})),l+=u.move(r),a()),l+=u.move(")"),o(),l}function qa(){return"!"}Ji.peek=ja;function Ji(e,n,t,i){const r=e.referenceType,s=t.enter("imageReference");let o=t.enter("label");const a=t.createTracker(i);let u=a.move("![");const l=t.safe(e.alt,{before:u,after:"]",...a.current()});u+=a.move(l+"]["),o();const c=t.stack;t.stack=[],o=t.enter("reference");const f=t.safe(t.associationId(e),{before:u,after:"]",...a.current()});return o(),t.stack=c,s(),r==="full"||!l||l!==f?u+=a.move(f+"]"):r==="shortcut"?u=u.slice(0,-1):u+=a.move("]"),u}function ja(){return"!"}Xi.peek=Ua;function Xi(e,n,t){let i=e.value||"",r="`",s=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(i);)r+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<t.unsafe.length;){const o=t.unsafe[s],a=t.compilePattern(o);let u;if(o.atBreak)for(;u=a.exec(i);){let l=u.index;i.charCodeAt(l)===10&&i.charCodeAt(l-1)===13&&l--,i=i.slice(0,l)+" "+i.slice(u.index+1)}}return r+i+r}function Ua(){return"`"}function Zi(e,n){const t=nn(e);return!!(!n.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(t===e.url||"mailto:"+t===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}er.peek=Ka;function er(e,n,t,i){const r=an(t),s=r==='"'?"Quote":"Apostrophe",o=t.createTracker(i);let a,u;if(Zi(e,t)){const c=t.stack;t.stack=[],a=t.enter("autolink");let f=o.move("<");return f+=o.move(t.containerPhrasing(e,{before:f,after:">",...o.current()})),f+=o.move(">"),a(),t.stack=c,f}a=t.enter("link"),u=t.enter("label");let l=o.move("[");return l+=o.move(t.containerPhrasing(e,{before:l,after:"](",...o.current()})),l+=o.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=t.enter("destinationLiteral"),l+=o.move("<"),l+=o.move(t.safe(e.url,{before:l,after:">",...o.current()})),l+=o.move(">")):(u=t.enter("destinationRaw"),l+=o.move(t.safe(e.url,{before:l,after:e.title?" ":")",...o.current()}))),u(),e.title&&(u=t.enter(`title${s}`),l+=o.move(" "+r),l+=o.move(t.safe(e.title,{before:l,after:r,...o.current()})),l+=o.move(r),u()),l+=o.move(")"),a(),l}function Ka(e,n,t){return Zi(e,t)?"<":"["}tr.peek=Va;function tr(e,n,t,i){const r=e.referenceType,s=t.enter("linkReference");let o=t.enter("label");const a=t.createTracker(i);let u=a.move("[");const l=t.containerPhrasing(e,{before:u,after:"]",...a.current()});u+=a.move(l+"]["),o();const c=t.stack;t.stack=[],o=t.enter("reference");const f=t.safe(t.associationId(e),{before:u,after:"]",...a.current()});return o(),t.stack=c,s(),r==="full"||!l||l!==f?u+=a.move(f+"]"):r==="shortcut"?u=u.slice(0,-1):u+=a.move("]"),u}function Va(){return"["}function ln(e){const n=e.options.bullet||"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bullet`, expected `*`, `+`, or `-`");return n}function Ha(e){const n=ln(e),t=e.options.bulletOther;if(!t)return n==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===n)throw new Error("Expected `bullet` (`"+n+"`) and `bulletOther` (`"+t+"`) to be different");return t}function Ya(e){const n=e.options.bulletOrdered||".";if(n!=="."&&n!==")")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrdered`, expected `.` or `)`");return n}function nr(e){const n=e.options.rule||"*";if(n!=="*"&&n!=="-"&&n!=="_")throw new Error("Cannot serialize rules with `"+n+"` for `options.rule`, expected `*`, `-`, or `_`");return n}function Ga(e,n,t,i){const r=t.enter("list"),s=t.bulletCurrent;let o=e.ordered?Ya(t):ln(t);const a=e.ordered?o==="."?")":".":Ha(t);let u=n&&t.bulletLastUsed?o===t.bulletLastUsed:!1;if(!e.ordered){const c=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&c&&(!c.children||!c.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(u=!0),nr(t)===o&&c){let f=-1;for(;++f<e.children.length;){const p=e.children[f];if(p&&p.type==="listItem"&&p.children&&p.children[0]&&p.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(o=a),t.bulletCurrent=o;const l=t.containerFlow(e,i);return t.bulletLastUsed=o,t.bulletCurrent=s,r(),l}function Qa(e){const n=e.options.listItemIndent||"one";if(n!=="tab"&&n!=="one"&&n!=="mixed")throw new Error("Cannot serialize items with `"+n+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return n}function Wa(e,n,t,i){const r=Qa(t);let s=t.bulletCurrent||ln(t);n&&n.type==="list"&&n.ordered&&(s=(typeof n.start=="number"&&n.start>-1?n.start:1)+(t.options.incrementListMarker===!1?0:n.children.indexOf(e))+s);let o=s.length+1;(r==="tab"||r==="mixed"&&(n&&n.type==="list"&&n.spread||e.spread))&&(o=Math.ceil(o/4)*4);const a=t.createTracker(i);a.move(s+" ".repeat(o-s.length)),a.shift(o);const u=t.enter("listItem"),l=t.indentLines(t.containerFlow(e,a.current()),c);return u(),l;function c(f,p,h){return p?(h?"":" ".repeat(o))+f:(h?s:s+" ".repeat(o-s.length))+f}}function Ja(e,n,t,i){const r=t.enter("paragraph"),s=t.enter("phrasing"),o=t.containerPhrasing(e,i);return s(),r(),o}const Xa=mt(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Za(e,n,t,i){return(e.children.some(function(o){return Xa(o)})?t.containerPhrasing:t.containerFlow).call(t,e,i)}function el(e){const n=e.options.strong||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize strong with `"+n+"` for `options.strong`, expected `*`, or `_`");return n}ir.peek=tl;function ir(e,n,t,i){const r=el(t),s=t.enter("strong"),o=t.createTracker(i),a=o.move(r+r);let u=o.move(t.containerPhrasing(e,{after:r,before:a,...o.current()}));const l=u.charCodeAt(0),c=st(i.before.charCodeAt(i.before.length-1),l,r);c.inside&&(u=de(l)+u.slice(1));const f=u.charCodeAt(u.length-1),p=st(i.after.charCodeAt(0),f,r);p.inside&&(u=u.slice(0,-1)+de(f));const h=o.move(r+r);return s(),t.attentionEncodeSurroundingInfo={after:p.outside,before:c.outside},a+u+h}function tl(e,n,t){return t.options.strong||"*"}function nl(e,n,t,i){return t.safe(e.value,i)}function il(e){const n=e.options.ruleRepetition||3;if(n<3)throw new Error("Cannot serialize rules with repetition `"+n+"` for `options.ruleRepetition`, expected `3` or more");return n}function rl(e,n,t){const i=(nr(t)+(t.options.ruleSpaces?" ":"")).repeat(il(t));return t.options.ruleSpaces?i.slice(0,-1):i}const sl={blockquote:wa,break:Kn,code:Ta,definition:Ca,emphasis:Hi,hardBreak:Kn,heading:$a,html:Qi,image:Wi,imageReference:Ji,inlineCode:Xi,link:er,linkReference:tr,list:Ga,listItem:Wa,paragraph:Ja,root:Za,strong:ir,text:nl,thematicBreak:rl},ol=[al];function al(e,n,t,i){if(n.type==="code"&&Mt(n,i)&&(e.type==="list"||e.type===n.type&&Mt(e,i)))return!1;if("spread"in t&&typeof t.spread=="boolean")return e.type==="paragraph"&&(e.type===n.type||n.type==="definition"||n.type==="heading"&&Gi(n,i))?void 0:t.spread?1:0}const ke=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],ll=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:ke},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:ke},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:ke},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:ke},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:ke},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:ke},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:ke},{atBreak:!0,character:"~"}];function ul(e){return e.label||!e.identifier?e.label||"":qi(e.identifier)}function cl(e){if(!e._compiled){const n=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((n?"("+n+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function fl(e,n,t){const i=n.indexStack,r=e.children||[],s=[];let o=-1,a=t.before,u;i.push(-1);let l=n.createTracker(t);for(;++o<r.length;){const c=r[o];let f;if(i[i.length-1]=o,o+1<r.length){let x=n.handle.handlers[r[o+1].type];x&&x.peek&&(x=x.peek),f=x?x(r[o+1],e,n,{before:"",after:"",...l.current()}).charAt(0):""}else f=t.after;s.length>0&&(a==="\r"||a===`
`)&&c.type==="html"&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),a=" ",l=n.createTracker(t),l.move(s.join("")));let p=n.handle(c,e,n,{...l.current(),after:f,before:a});u&&u===p.slice(0,1)&&(p=de(u.charCodeAt(0))+p.slice(1));const h=n.attentionEncodeSurroundingInfo;n.attentionEncodeSurroundingInfo=void 0,u=void 0,h&&(s.length>0&&h.before&&a===s[s.length-1].slice(-1)&&(s[s.length-1]=s[s.length-1].slice(0,-1)+de(a.charCodeAt(0))),h.after&&(u=f)),l.move(p),s.push(p),a=p.slice(-1)}return i.pop(),s.join("")}function hl(e,n,t){const i=n.indexStack,r=e.children||[],s=n.createTracker(t),o=[];let a=-1;for(i.push(-1);++a<r.length;){const u=r[a];i[i.length-1]=a,o.push(s.move(n.handle(u,e,n,{before:`
`,after:`
`,...s.current()}))),u.type!=="list"&&(n.bulletLastUsed=void 0),a<r.length-1&&o.push(s.move(pl(u,r[a+1],e,n)))}return i.pop(),o.join("")}function pl(e,n,t,i){let r=i.join.length;for(;r--;){const s=i.join[r](e,n,t,i);if(s===!0||s===1)break;if(typeof s=="number")return`
`.repeat(1+s);if(s===!1)return`

<!---->

`}return`

`}const dl=/\r?\n|\r/g;function ml(e,n){const t=[];let i=0,r=0,s;for(;s=dl.exec(e);)o(e.slice(i,s.index)),t.push(s[0]),i=s.index+s[0].length,r++;return o(e.slice(i)),t.join("");function o(a){t.push(n(a,r,!a))}}function gl(e,n,t){const i=(t.before||"")+(n||"")+(t.after||""),r=[],s=[],o={};let a=-1;for(;++a<e.unsafe.length;){const c=e.unsafe[a];if(!Vi(e.stack,c))continue;const f=e.compilePattern(c);let p;for(;p=f.exec(i);){const h="before"in c||!!c.atBreak,x="after"in c,b=p.index+(h?p[1].length:0);r.includes(b)?(o[b].before&&!h&&(o[b].before=!1),o[b].after&&!x&&(o[b].after=!1)):(r.push(b),o[b]={before:h,after:x})}}r.sort(yl);let u=t.before?t.before.length:0;const l=i.length-(t.after?t.after.length:0);for(a=-1;++a<r.length;){const c=r[a];c<u||c>=l||c+1<l&&r[a+1]===c+1&&o[c].after&&!o[c+1].before&&!o[c+1].after||r[a-1]===c-1&&o[c].before&&!o[c-1].before&&!o[c-1].after||(u!==c&&s.push(Vn(i.slice(u,c),"\\")),u=c,/[!-/:-@[-`{-~]/.test(i.charAt(c))&&(!t.encode||!t.encode.includes(i.charAt(c)))?s.push("\\"):(s.push(de(i.charCodeAt(c))),u++))}return s.push(Vn(i.slice(u,l),t.after)),s.join("")}function yl(e,n){return e-n}function Vn(e,n){const t=/\\(?=[!-/:-@[-`{-~])/g,i=[],r=[],s=e+n;let o=-1,a=0,u;for(;u=t.exec(s);)i.push(u.index);for(;++o<i.length;)a!==i[o]&&r.push(e.slice(a,i[o])),r.push("\\"),a=i[o];return r.push(e.slice(a)),r.join("")}function kl(e){const n=e||{},t=n.now||{};let i=n.lineShift||0,r=t.line||1,s=t.column||1;return{move:u,current:o,shift:a};function o(){return{now:{line:r,column:s},lineShift:i}}function a(l){i+=l}function u(l){const c=l||"",f=c.split(/\r?\n|\r/g),p=f[f.length-1];return r+=f.length-1,s=f.length===1?s+p.length:1+p.length+i,c}}function bl(e,n){const t=n||{},i={associationId:ul,containerPhrasing:Il,containerFlow:Tl,createTracker:kl,compilePattern:cl,enter:s,handlers:{...sl},handle:void 0,indentLines:ml,indexStack:[],join:[...ol],options:{},safe:Al,stack:[],unsafe:[...ll]};Ki(i,t),i.options.tightDefinitions&&i.join.push(Sl),i.handle=ya("type",{invalid:wl,unknown:xl,handlers:i.handlers});let r=i.handle(e,void 0,i,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return r&&r.charCodeAt(r.length-1)!==10&&r.charCodeAt(r.length-1)!==13&&(r+=`
`),r;function s(o){return i.stack.push(o),a;function a(){i.stack.pop()}}}function wl(e){throw new Error("Cannot handle value `"+e+"`, expected node")}function xl(e){const n=e;throw new Error("Cannot handle unknown node `"+n.type+"`")}function Sl(e,n){if(e.type==="definition"&&e.type===n.type)return 0}function Il(e,n){return fl(e,this,n)}function Tl(e,n){return hl(e,this,n)}function Al(e,n){return gl(this,e,n)}function Cl(e){const n=this;n.compiler=t;function t(i){return bl(i,{...n.data("settings"),...e,extensions:n.data("toMarkdownExtensions")||[]})}}function Hn(e){if(e)throw e}var It,Yn;function El(){if(Yn)return It;Yn=1;var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(l){return typeof Array.isArray=="function"?Array.isArray(l):n.call(l)==="[object Array]"},s=function(l){if(!l||n.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),f=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!f)return!1;var p;for(p in l);return typeof p>"u"||e.call(l,p)},o=function(l,c){t&&c.name==="__proto__"?t(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},a=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(i)return i(l,c).value}else return;return l[c]};return It=function u(){var l,c,f,p,h,x,b=arguments[0],A=1,k=arguments.length,E=!1;for(typeof b=="boolean"&&(E=b,b=arguments[1]||{},A=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});A<k;++A)if(l=arguments[A],l!=null)for(c in l)f=a(b,c),p=a(l,c),b!==p&&(E&&p&&(s(p)||(h=r(p)))?(h?(h=!1,x=f&&r(f)?f:[]):x=f&&s(f)?f:{},o(b,{name:c,newValue:u(E,x,p)})):typeof p<"u"&&o(b,{name:c,newValue:p}));return b},It}var _l=El();const Tt=ai(_l);function $t(e){if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ll(){const e=[],n={run:t,use:i};return n;function t(...r){let s=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...r);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<r.length;)(l[f]===null||l[f]===void 0)&&(l[f]=r[f]);r=l,c?Nl(c,a)(...l):o(null,...l)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return e.push(r),n}}function Nl(e,n){let t;return i;function i(...o){const a=e.length>o.length;let u;a&&o.push(r);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&t)throw c;return r(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,r):u instanceof Error?r(u):s(u))}function r(o,...a){t||(t=!0,n(o,...a))}function s(o){r(null,o)}}class G extends Error{constructor(n,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let r="",s={},o=!1;if(t&&("line"in t&&"column"in t?s={place:t}:"start"in t&&"end"in t?s={place:t}:"type"in t?s={ancestors:[t],place:t.position}:s={...t}),typeof n=="string"?r=n:!s.cause&&n&&(o=!0,r=n.message,s.cause=n),!s.ruleId&&!s.source&&typeof i=="string"){const u=i.indexOf(":");u===-1?s.ruleId=i:(s.source=i.slice(0,u),s.ruleId=i.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=je(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}G.prototype.file="";G.prototype.name="";G.prototype.reason="";G.prototype.message="";G.prototype.stack="";G.prototype.column=void 0;G.prototype.line=void 0;G.prototype.ancestors=void 0;G.prototype.cause=void 0;G.prototype.fatal=void 0;G.prototype.place=void 0;G.prototype.ruleId=void 0;G.prototype.source=void 0;const ie={basename:vl,dirname:Fl,extname:Pl,join:Ol,sep:"/"};function vl(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');He(e);let t=0,i=-1,r=e.length,s;if(n===void 0||n.length===0||n.length>e.length){for(;r--;)if(e.codePointAt(r)===47){if(s){t=r+1;break}}else i<0&&(s=!0,i=r+1);return i<0?"":e.slice(t,i)}if(n===e)return"";let o=-1,a=n.length-1;for(;r--;)if(e.codePointAt(r)===47){if(s){t=r+1;break}}else o<0&&(s=!0,o=r+1),a>-1&&(e.codePointAt(r)===n.codePointAt(a--)?a<0&&(i=r):(a=-1,i=o));return t===i?i=o:i<0&&(i=e.length),e.slice(t,i)}function Fl(e){if(He(e),e.length===0)return".";let n=-1,t=e.length,i;for(;--t;)if(e.codePointAt(t)===47){if(i){n=t;break}}else i||(i=!0);return n<0?e.codePointAt(0)===47?"/":".":n===1&&e.codePointAt(0)===47?"//":e.slice(0,n)}function Pl(e){He(e);let n=e.length,t=-1,i=0,r=-1,s=0,o;for(;n--;){const a=e.codePointAt(n);if(a===47){if(o){i=n+1;break}continue}t<0&&(o=!0,t=n+1),a===46?r<0?r=n:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||t<0||s===0||s===1&&r===t-1&&r===i+1?"":e.slice(r,t)}function Ol(...e){let n=-1,t;for(;++n<e.length;)He(e[n]),e[n]&&(t=t===void 0?e[n]:t+"/"+e[n]);return t===void 0?".":zl(t)}function zl(e){He(e);const n=e.codePointAt(0)===47;let t=Bl(e,!n);return t.length===0&&!n&&(t="."),t.length>0&&e.codePointAt(e.length-1)===47&&(t+="/"),n?"/"+t:t}function Bl(e,n){let t="",i=0,r=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(r===o-1||s===1))if(r!==o-1&&s===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(u=t.lastIndexOf("/"),u!==t.length-1){u<0?(t="",i=0):(t=t.slice(0,u),i=t.length-1-t.lastIndexOf("/")),r=o,s=0;continue}}else if(t.length>0){t="",i=0,r=o,s=0;continue}}n&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+e.slice(r+1,o):t=e.slice(r+1,o),i=o-r-1;r=o,s=0}else a===46&&s>-1?s++:s=-1}return t}function He(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ml={cwd:Rl};function Rl(){return"/"}function Dt(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function $l(e){if(typeof e=="string")e=new URL(e);else if(!Dt(e)){const n=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw n.code="ERR_INVALID_ARG_TYPE",n}if(e.protocol!=="file:"){const n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return Dl(e)}function Dl(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const n=e.pathname;let t=-1;for(;++t<n.length;)if(n.codePointAt(t)===37&&n.codePointAt(t+1)===50){const i=n.codePointAt(t+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(n)}const At=["history","path","basename","stem","extname","dirname"];class ql{constructor(n){let t;n?Dt(n)?t={path:n}:typeof n=="string"||jl(n)?t={value:n}:t=n:t={},this.cwd="cwd"in t?"":Ml.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<At.length;){const s=At[i];s in t&&t[s]!==void 0&&t[s]!==null&&(this[s]=s==="history"?[...t[s]]:t[s])}let r;for(r in t)At.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?ie.basename(this.path):void 0}set basename(n){Et(n,"basename"),Ct(n,"basename"),this.path=ie.join(this.dirname||"",n)}get dirname(){return typeof this.path=="string"?ie.dirname(this.path):void 0}set dirname(n){Gn(this.basename,"dirname"),this.path=ie.join(n||"",this.basename)}get extname(){return typeof this.path=="string"?ie.extname(this.path):void 0}set extname(n){if(Ct(n,"extname"),Gn(this.dirname,"extname"),n){if(n.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(n.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ie.join(this.dirname,this.stem+(n||""))}get path(){return this.history[this.history.length-1]}set path(n){Dt(n)&&(n=$l(n)),Et(n,"path"),this.path!==n&&this.history.push(n)}get stem(){return typeof this.path=="string"?ie.basename(this.path,this.extname):void 0}set stem(n){Et(n,"stem"),Ct(n,"stem"),this.path=ie.join(this.dirname||"",n+(this.extname||""))}fail(n,t,i){const r=this.message(n,t,i);throw r.fatal=!0,r}info(n,t,i){const r=this.message(n,t,i);return r.fatal=void 0,r}message(n,t,i){const r=new G(n,t,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(n){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(n||void 0).decode(this.value)}}function Ct(e,n){if(e&&e.includes(ie.sep))throw new Error("`"+n+"` cannot be a path: did not expect `"+ie.sep+"`")}function Et(e,n){if(!e)throw new Error("`"+n+"` cannot be empty")}function Gn(e,n){if(!e)throw new Error("Setting `"+n+"` requires `path` to be set too")}function jl(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Ul=function(e){const i=this.constructor.prototype,r=i[e],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,i),s},Kl={}.hasOwnProperty;class un extends Ul{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ll()}copy(){const n=new un;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];n.use(...i)}return n.data(Tt(!0,{},this.namespace)),n}data(n,t){return typeof n=="string"?arguments.length===2?(Nt("data",this.frozen),this.namespace[n]=t,this):Kl.call(this.namespace,n)&&this.namespace[n]||void 0:n?(Nt("data",this.frozen),this.namespace=n,this):this.namespace}freeze(){if(this.frozen)return this;const n=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=t.call(n,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(n){this.freeze();const t=Xe(n),i=this.parser||this.Parser;return _t("parse",i),i(String(t),t)}process(n,t){const i=this;return this.freeze(),_t("process",this.parser||this.Parser),Lt("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(s,o){const a=Xe(n),u=i.parse(a);i.run(u,a,function(c,f,p){if(c||!f||!p)return l(c);const h=f,x=i.stringify(h,p);Yl(x)?p.value=x:p.result=x,l(c,p)});function l(c,f){c||!f?o(c):s?s(f):t(void 0,f)}}}processSync(n){let t=!1,i;return this.freeze(),_t("processSync",this.parser||this.Parser),Lt("processSync",this.compiler||this.Compiler),this.process(n,r),Wn("processSync","process",t),i;function r(s,o){t=!0,Hn(s),i=o}}run(n,t,i){Qn(n),this.freeze();const r=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?s(void 0,i):new Promise(s);function s(o,a){const u=Xe(t);r.run(n,u,l);function l(c,f,p){const h=f||n;c?a(c):o?o(h):i(void 0,h,p)}}}runSync(n,t){let i=!1,r;return this.run(n,t,s),Wn("runSync","run",i),r;function s(o,a){Hn(o),r=a,i=!0}}stringify(n,t){this.freeze();const i=Xe(t),r=this.compiler||this.Compiler;return Lt("stringify",r),Qn(n),r(n,i)}use(n,...t){const i=this.attachers,r=this.namespace;if(Nt("use",this.frozen),n!=null)if(typeof n=="function")u(n,t);else if(typeof n=="object")Array.isArray(n)?a(n):o(n);else throw new TypeError("Expected usable value, not `"+n+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(r.settings=Tt(!0,r.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,p=-1;for(;++f<i.length;)if(i[f][0]===l){p=f;break}if(p===-1)i.push([l,...c]);else if(c.length>0){let[h,...x]=c;const b=i[p][1];$t(b)&&$t(h)&&(h=Tt(!0,b,h)),i[p]=[l,h,...x]}}}}const Vl=new un().freeze();function _t(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Lt(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Nt(e,n){if(n)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Qn(e){if(!$t(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Wn(e,n,t){if(!t)throw new Error("`"+e+"` finished async. Use `"+n+"` instead")}function Xe(e){return Hl(e)?e:new ql(e)}function Hl(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Yl(e){return typeof e=="string"||Gl(e)}function Gl(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Ql=Vl().use(ga).use(Cl).freeze();var vt={exports:{}},Jn;function Wl(){return Jn||(Jn=1,(function(e){(function(){var n;n=e.exports=r,n.format=r,n.vsprintf=i,typeof console<"u"&&typeof console.log=="function"&&(n.printf=t);function t(){console.log(r.apply(null,arguments))}function i(s,o){return r.apply(null,[s].concat(o))}function r(s){for(var o=1,a=[].slice.call(arguments),u=0,l=s.length,c="",f,p=!1,h,x,b=!1,A,k=function(){return a[o++]},E=function(){for(var w="";/\d/.test(s[u]);)w+=s[u++],f=s[u];return w.length>0?parseInt(w):null};u<l;++u)if(f=s[u],p)switch(p=!1,f=="."?(b=!1,f=s[++u]):f=="0"&&s[u+1]=="."?(b=!0,u+=2,f=s[u]):b=!0,A=E(),f){case"b":c+=parseInt(k(),10).toString(2);break;case"c":h=k(),typeof h=="string"||h instanceof String?c+=h:c+=String.fromCharCode(parseInt(h,10));break;case"d":c+=parseInt(k(),10);break;case"f":x=String(parseFloat(k()).toFixed(A||6)),c+=b?x:x.replace(/^0/,"");break;case"j":c+=JSON.stringify(k());break;case"o":c+="0"+parseInt(k(),10).toString(8);break;case"s":c+=k();break;case"x":c+="0x"+parseInt(k(),10).toString(16);break;case"X":c+="0x"+parseInt(k(),10).toString(16).toUpperCase();break;default:c+=f;break}else f==="%"?p=!0:c+=f;return c}})()})(vt)),vt.exports}var Jl=Wl();const Xl=ai(Jl),Ze=Object.assign(be(Error),{eval:be(EvalError),range:be(RangeError),reference:be(ReferenceError),syntax:be(SyntaxError),type:be(TypeError),uri:be(URIError)});function be(e){return n.displayName=e.displayName||e.name,n;function n(t,...i){const r=t&&Xl(t,...i);return new e(r)}}const et={}.hasOwnProperty,Xn={yaml:"-",toml:"+"};function cn(e){const n=[];let t=-1;const i=Array.isArray(e)?e:e?[e]:["yaml"];for(;++t<i.length;)n[t]=Zl(i[t]);return n}function Zl(e){let n=e;if(typeof n=="string"){if(!et.call(Xn,n))throw Ze("Missing matter definition for `%s`",n);n={type:n,marker:Xn[n]}}else if(typeof n!="object")throw Ze("Expected matter to be an object, not `%j`",n);if(!et.call(n,"type"))throw Ze("Missing `type` in matter `%j`",n);if(!et.call(n,"fence")&&!et.call(n,"marker"))throw Ze("Missing `marker` or `fence` in matter `%j`",n);return n}function eu(e){const n=cn(e),t={};let i=-1;for(;++i<n.length;){const r=n[i],s=qt(r,"open").charCodeAt(0),o=tu(r),a=t[s];Array.isArray(a)?a.push(o):t[s]=[o]}return{flow:t}}function tu(e){const n=e.anywhere,t=e.type,i=t+"Fence",r=i+"Sequence",s=t+"Value",o={tokenize:c,partial:!0};let a,u=0;return{tokenize:l,concrete:!0};function l(f,p,h){const x=this;return b;function b(S){const T=x.now();return T.column===1&&(T.line===1||n)&&(a=qt(e,"open"),u=0,S===a.charCodeAt(u))?(f.enter(t),f.enter(i),f.enter(r),A(S)):h(S)}function A(S){return u===a.length?(f.exit(r),z(S)?(f.enter("whitespace"),k(S)):E(S)):S===a.charCodeAt(u++)?(f.consume(S),A):h(S)}function k(S){return z(S)?(f.consume(S),k):(f.exit("whitespace"),E(S))}function E(S){return L(S)?(f.exit(i),f.enter("lineEnding"),f.consume(S),f.exit("lineEnding"),a=qt(e,"close"),u=0,f.attempt(o,g,w)):h(S)}function w(S){return S===null||L(S)?N(S):(f.enter(s),v(S))}function v(S){return S===null||L(S)?(f.exit(s),N(S)):(f.consume(S),v)}function N(S){return S===null?h(S):(f.enter("lineEnding"),f.consume(S),f.exit("lineEnding"),f.attempt(o,g,w))}function g(S){return f.exit(t),p(S)}}function c(f,p,h){let x=0;return b;function b(w){return w===a.charCodeAt(x)?(f.enter(i),f.enter(r),A(w)):h(w)}function A(w){return x===a.length?(f.exit(r),z(w)?(f.enter("whitespace"),k(w)):E(w)):w===a.charCodeAt(x++)?(f.consume(w),A):h(w)}function k(w){return z(w)?(f.consume(w),k):(f.exit("whitespace"),E(w))}function E(w){return w===null||L(w)?(f.exit(i),p(w)):h(w)}}}function qt(e,n){return e.marker?Zn(e.marker,n).repeat(3):Zn(e.fence,n)}function Zn(e,n){return typeof e=="string"?e:e[n]}function nu(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function iu(e){const n=cn(e),t={},i={};let r=-1;for(;++r<n.length;){const s=n[r];t[s.type]=ru(s),i[s.type]=su,i[s.type+"Value"]=ou}return{enter:t,exit:i}}function ru(e){return n;function n(t){this.enter({type:e.type,value:""},t),this.buffer()}}function su(e){const n=this.resume(),t=this.stack[this.stack.length-1];this.exit(e),t.value=n.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,"")}function ou(e){this.config.enter.data.call(this,e),this.config.exit.data.call(this,e)}function au(e){const n=[],t={},i=cn(e);let r=-1;for(;++r<i.length;){const s=i[r];t[s.type]=lu(s);const o=jt(s,"open");n.push({atBreak:!0,character:o.charAt(0),after:nu(o.charAt(1))})}return{unsafe:n,handlers:t}}function lu(e){const n=jt(e,"open"),t=jt(e,"close");return i;function i(r){return n+(r.value?`
`+r.value:"")+`
`+t}}function jt(e,n){return e.marker?ei(e.marker,n).repeat(3):ei(e.fence,n)}function ei(e,n){return typeof e=="string"?e:e[n]}const uu="yaml";function cu(e){const n=this,t=e||uu,i=n.data(),r=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),o=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);r.push(eu(t)),s.push(iu(t)),o.push(au(t))}function fu(e,n,t){const i=mt(n);let r=!0;n&&typeof n=="object"&&"cascade"in n&&typeof n.cascade=="boolean"&&(r=n.cascade),s(e);function s(o,a,u){if(o!==e&&i(o,a,u))return!1;if("children"in o&&Array.isArray(o.children)){const l=o,c=l.children;let f=-1,p=0;if(c.length>0){for(;++f<c.length;)s(c[f],f,l)&&(c[p++]=c[f]);if(o!==e&&r&&!p)return!1;c.length=p}}return!0}}const hu=/^---(?:\r?\n|\r)(?:([\s\S]*?)(?:\r?\n|\r))?---(?:\r?\n|\r|$)/,pu={},du={};function mu(e,n){const t=pu,i=t.strip,r=t.yaml||du;let s=String(e);const o=hu.exec(s);o?(e.data.matter=Li.parse(o[1]||"",r)||{},i&&(s=s.slice(o[0].length),e.value=e.value&&typeof e.value=="object"?new TextEncoder().encode(s):s)):e.data.matter={}}async function gu(e){const n=await Ql().use(cu,["yaml"]).use(()=>(t,i)=>{fu(t,r=>r.type==="yaml"||r.type==="toml"),mu(i)}).process(e);return{data:n.data.matter??{},content:String(n.value)}}async function yu(e,n){const t=await gu(n);let i=e.fields.find(s=>s.widget==="markdown"),r=t.data;return i&&(r[i.name]=t.content),r}function Eu(e,n){let t=e.fields.find(s=>s.widget==="markdown"),i={data:n};return t&&(i.content=n[t.name],delete n[t.name]),ku(i)}function ku({data:e={},content:n}){return!e||Object.keys(e).length===0?String(n).trimStart():`---
${Li.stringify(e).trimEnd()}
---

${String(n).trimStart()}`}class bu{storage;email;state;constructor(n,t){this.state={apiURL:n,...t,fetch:t.fetch??globalThis.fetch.bind(globalThis)},this.email=new wu(this.state),this.storage=new xu(this.state),this.state.storage=this.storage}setConfig(n){this.state.config=n}}class wu{constructor(n){this.state=n}send(n){return this.state.fetch(new URL("/emails/send",this.state.apiURL),{method:"post",body:JSON.stringify(n)})}async prepareTemplate(n,t,i){let r=await this.state.storage.get(n,t);return this.state.storage.processTemplate(n,r,i)}}class xu{constructor(n){this.state=n}ls(){}async get(n,t){const i=this.getSchema(n);if(!i.preview_path)throw new Error(`${n} does not have preview_path`);let r=`${i.preview_path.replace("{{filename}}",t)}`;const s=await this.state.fetch(r).then(Su).then(o=>o.text());return yu(i,s)}async processTemplate(n,t,i){const r=this.getSchema(n);let s={...t};for(const o of r.fields)o.template&&(s[o.name]=Mr.compile(t[o.name])({record:t,data:i}));return s}getSchema(n){const t=this.state.config.collections[n];if(!t)throw new Error(`failed to load schema for ${n}`);return t}}function Su(e){if(!e.ok)throw e;return e}const rr=mr({});function _u(){return dr(rr)}function Lu(e){const n=gr(Iu);return yr(rr.Provider,{value:n,get children(){return e.children}})}async function Iu(){console.log("get config");const e=await fetch(new URL("/decap-admin/config.yml",location.href)).then(i=>i.text()),n=_i(e);n.collections=Object.fromEntries(n.collections.map(i=>[i.name,i]));const t=new bu(Rr(),{config:n});return{...n,client:t}}export{Lu as C,Cu as c,Eu as e,Rr as g,yu as p,_u as u};
