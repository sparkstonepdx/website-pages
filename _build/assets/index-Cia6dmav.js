import{g,a,i as l,t as d,u as B}from"./web-D9HcAmXK.js";import{n as D}from"./main.modern-DAvPJVT3.js";import{t as L,b as c}from"./solid-CBRdhu3b.js";import{H as M}from"./header-CJhEAd4T.js";import{u as O,g as u,p as U,e as W}from"./config-context-Bt3Lq7ah.js";import{C as q}from"./collection-form-B8qTMCSh.js";import{S as z}from"./showWhenResource-ihjzlG7T.js";import{h as A,i as G,j as I}from"./sparkstone-logo-full-BzSmPZhe.js";var J=d('<form><header class="flex flip"><h2 style=margin:0>Editing <!$><!/></h2><div style=flex-grow:1></div><button>Publish</button></header><hr><!$><!/>'),K=d("<main class=container><!$><!/><hr><!$><!/>");function re(Q){const[i]=O(),s=A();G();const r=()=>i()?.collections?.[s.collection],{formSubmit:h,errors:_,validate:p}=D(),b=I(),[m]=L(()=>({entry:s.entry,collection:r()}),async({entry:e,collection:n})=>{if(n)return await fetch(`${u(i())}/storage/file/${n?.folder}${e}`).then(t=>t.text()).then(t=>U(n,t))});async function x(e){const n=Object.fromEntries(new FormData(e).entries()),t=await W(r(),n);await fetch(`${u(i())}/storage/file/${r()?.folder}/${s.entry}`,{method:"put",body:t}),e.reset(),b(`/admin?collection=${r().name}`)}return(()=>{var e=g(K),n=e.firstChild,[t,S]=a(n.nextSibling),y=t.nextSibling,C=y.nextSibling,[v,w]=a(C.nextSibling);return l(e,c(M,{}),t,S),l(e,c(z,{resources:[i,m],get children(){var o=g(J),$=o.firstChild,f=$.firstChild,E=f.firstChild,P=E.nextSibling,[N,R]=a(P.nextSibling),j=$.nextSibling,k=j.nextSibling,[F,H]=a(k.nextSibling);return B(h,o,()=>x),l(f,()=>r()?.label,N,R),l(o,c(q,{get collection(){return r()},get defaults(){return m()},errors:_,validate:p}),F,H),o}}),v,w),e})()}export{re as default};
