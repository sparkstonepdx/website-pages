import{$ as S,t as X,v as T,w as N,e as K,b as A,F as Y,h as B,M as O,j as m}from"./solid-DLBwXPei.js";import{g as k,t as V,i as v,u as P,b as _,c as b}from"./web-D4Sjcv9r.js";const L=Symbol("store-raw"),j=Symbol("store-node"),y=Symbol("store-has"),z=Symbol("store-self");function I(e){let t=e[S];if(!t&&(Object.defineProperty(e,S,{value:t=new Proxy(e,Q)}),!Array.isArray(e))){const r=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let l=0,a=r.length;l<a;l++){const i=r[l];n[i].get&&Object.defineProperty(e,i,{enumerable:n[i].enumerable,get:n[i].get.bind(t)})}}return t}function F(e){let t;return e!=null&&typeof e=="object"&&(e[S]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function q(e,t=new Set){let r,n,l,a;if(r=e!=null&&e[L])return r;if(!F(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,o=e.length;i<o;i++)l=e[i],(n=q(l,t))!==l&&(e[i]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let s=0,c=i.length;s<c;s++)a=i[s],!o[a].get&&(l=e[a],(n=q(l,t))!==l&&(e[a]=n))}return e}function R(e,t){let r=e[t];return r||Object.defineProperty(e,t,{value:r=Object.create(null)}),r}function x(e,t,r){if(e[t])return e[t];const[n,l]=K(r,{equals:!1,internal:!0});return n.$=l,e[t]=n}function G(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||!r.configurable||t===S||t===j||(delete r.value,delete r.writable,r.get=()=>e[S][t]),r}function W(e){N()&&x(R(e,j),z)()}function J(e){return W(e),Reflect.ownKeys(e)}const Q={get(e,t,r){if(t===L)return e;if(t===S)return r;if(t===T)return W(e),r;const n=R(e,j),l=n[t];let a=l?l():e[t];if(t===j||t===y||t==="__proto__")return a;if(!l){const i=Object.getOwnPropertyDescriptor(e,t);N()&&(typeof a!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(a=x(n,t,a)())}return F(a)?I(a):a},has(e,t){return t===L||t===S||t===T||t===j||t===y||t==="__proto__"?!0:(N()&&x(R(e,y),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:J,getOwnPropertyDescriptor:G};function M(e,t,r,n=!1){if(!n&&e[t]===r)return;const l=e[t],a=e.length;r===void 0?(delete e[t],e[y]&&e[y][t]&&l!==void 0&&e[y][t].$()):(e[t]=r,e[y]&&e[y][t]&&l===void 0&&e[y][t].$());let i=R(e,j),o;if((o=x(i,t,l))&&o.$(()=>r),Array.isArray(e)&&e.length!==a){for(let s=e.length;s<a;s++)(o=i[s])&&o.$();(o=x(i,"length",a))&&o.$(e.length)}(o=i[z])&&o.$()}function H(e,t){const r=Object.keys(t);for(let n=0;n<r.length;n+=1){const l=r[n];M(e,l,t[l])}}function U(e,t){if(typeof t=="function"&&(t=t(e)),t=q(t),Array.isArray(t)){if(e===t)return;let r=0,n=t.length;for(;r<n;r++){const l=t[r];e[r]!==l&&M(e,r,l)}M(e,"length",n)}else H(e,t)}function C(e,t,r=[]){let n,l=e;if(t.length>1){n=t.shift();const i=typeof n,o=Array.isArray(e);if(Array.isArray(n)){for(let s=0;s<n.length;s++)C(e,[n[s]].concat(t),r);return}else if(o&&i==="function"){for(let s=0;s<e.length;s++)n(e[s],s)&&C(e,[s].concat(t),r);return}else if(o&&i==="object"){const{from:s=0,to:c=e.length-1,by:d=1}=n;for(let u=s;u<=c;u+=d)C(e,[u].concat(t),r);return}else if(t.length>1){C(e[n],t,[n].concat(r));return}l=e[n],r=[n].concat(r)}let a=t[0];typeof a=="function"&&(a=a(l,r),a===l)||n===void 0&&a==null||(a=q(a),n===void 0||F(l)&&F(a)&&!Array.isArray(a)?H(l,a):M(e,n,a))}function Z(...[e,t]){const r=q(e||{}),n=Array.isArray(r),l=I(r);function a(...i){X(()=>{n&&i.length===1?U(r,i[0]):C(r,i)})}return[l,a]}function E({element:e,validators:t=[]},r,n){return async()=>{e.setCustomValidity==null||e.setCustomValidity(""),e.checkValidity==null||e.checkValidity();let l=e.validationMessage;if(!l)for(const i of t){if(!i)continue;const o=await i(e);if(o){l=o,e.setCustomValidity==null||e.setCustomValidity(o);break}}var a;return l&&(n&&e.classList.toggle(n,!0),e.setAttribute("aria-invalid","true"),r({[(a=e.name)!=null?a:e.dataset.name]:l})),l}}function ae({errorClass:e=""}={}){const[t,r]=Z({}),[n,l]=K(!1),[a,i]=K(!1),o={},s=(u,f=()=>{})=>{queueMicrotask(()=>{var g;let h=(g=u.name)!=null?g:u.dataset.name;const w=f(),$=Array.isArray(w)?w:[];let D;o[h]=D={element:u,validators:$},u.onblur=()=>(i(!1),E(D,r,e)),u.oninput=()=>{i(!1),t[h]&&(r({[h]:void 0}),u.setAttribute("aria-invalid","false"),e&&u.classList.toggle(e,!1))}})};async function c(u,f){let g=!1;for(const w in o){const $=o[w];if(!$)continue;let D=await E($,r,e)();g||!$.element.validationMessage&&!D||($.element.focus(),$.element.scrollIntoView({behavior:"smooth"}),document.contains($.element)?g=!0:delete o[w])}if(g)return;l(!0);let h=await u(f);if(l(!1),h instanceof Object){for(const w in h)w in o&&o[w].element.setAttribute("aria-invalid","true");r(h)}else d(),i(!0)}function d(){r(u=>Object.fromEntries(Object.entries(u).map(([f,g])=>[f,void 0])))}return{validate:s,formSubmit:(u,f)=>{const g=f()||(()=>{});i(!1),u.setAttribute("novalidate",""),u.onsubmit=async h=>{h.preventDefault(),await c(g,u)},u.onreset=()=>{d()}},submit:c,errors:t,isSubmitting:n,isSubmitted:a,validateField:async function(u){const f=o[u];if(!f)return!1;let g=await E(f,r,e)();return(f.element.validationMessage||g)&&(f.element.focus(),f.element.scrollIntoView({behavior:"smooth"})),!t[u]},getFieldValue:function(u){const f=o[u];return f?.element.value},validateRef:(...u)=>f=>s(f,()=>u)}}var p=V("<label><p></p><input type=date><small class=error>"),ee=V("<label><p></p><img style=max-width:6rem;max-height:6rem><input><small class=error>"),te=V("<label><input role=switch type=checkbox><p></p><small class=error>"),ne=V("<label><p></p><textarea rows=25></textarea><small class=error>"),re=V("<label><p></p><input><small class=error>");function se(e){let t=e.errors,r=e.validate;return A(Y,{get each(){return e.collection.fields??[]},children:n=>A(B,{get children(){return[A(O,{get when(){return n.widget==="hidden"},get children(){return[]}}),A(O,{get when(){return n.widget==="date"},get children(){var l=k(p),a=l.firstChild,i=a.nextSibling,o=i.nextSibling;return v(a,()=>n.label),P(r,i,()=>!0),v(o,()=>t[n.name]),m(s=>{var c=n.name,d=n.required??!0;return c!==s.e&&_(i,"name",s.e=c),d!==s.t&&b(i,"required",s.t=d),s},{e:void 0,t:void 0}),m(()=>b(i,"value",e.defaults?.[n.name]??"")),l}}),A(O,{get when(){return n.widget==="image"},get children(){var l=k(ee),a=l.firstChild,i=a.nextSibling,o=i.nextSibling,s=o.nextSibling;return v(a,()=>n.label),P(r,o,()=>!0),v(s,()=>t[n.name]),m(c=>{var d=e.defaults?.[n.name]??"",u=n.name,f=n.required??!0;return d!==c.e&&_(i,"src",c.e=d),u!==c.t&&_(o,"name",c.t=u),f!==c.a&&b(o,"required",c.a=f),c},{e:void 0,t:void 0,a:void 0}),m(()=>b(o,"value",e.defaults?.[n.name]??"")),l}}),A(O,{get when(){return n.widget==="boolean"},get children(){var l=k(te),a=l.firstChild,i=a.nextSibling,o=i.nextSibling;return P(r,a,()=>!0),b(a,"value",!0),v(i,()=>n.label),v(o,()=>t[n.name]),m(s=>{var c=n.name,d=n.required??!0;return c!==s.e&&_(a,"name",s.e=c),d!==s.t&&b(a,"required",s.t=d),s},{e:void 0,t:void 0}),m(()=>b(a,"checked",e.defaults?.[n.name])),l}}),A(O,{get when(){return n.widget==="markdown"},get children(){var l=k(ne),a=l.firstChild,i=a.nextSibling,o=i.nextSibling;return v(a,()=>n.label),P(r,i,()=>!0),v(o,()=>t[n.name]),m(s=>{var c=n.name,d=n.required??!0;return c!==s.e&&_(i,"name",s.e=c),d!==s.t&&b(i,"required",s.t=d),s},{e:void 0,t:void 0}),m(()=>b(i,"value",e.defaults?.[n.name]??"")),l}}),A(O,{when:!0,get children(){var l=k(re),a=l.firstChild,i=a.nextSibling,o=i.nextSibling;return v(a,()=>n.label),P(r,i,()=>!0),v(o,()=>t[n.name]),m(s=>{var c=n.name,d=n.required??!0;return c!==s.e&&_(i,"name",s.e=c),d!==s.t&&b(i,"required",s.t=d),s},{e:void 0,t:void 0}),m(()=>b(i,"value",e.defaults?.[n.name]??"")),l}})]}})})}export{se as C,ae as n};
