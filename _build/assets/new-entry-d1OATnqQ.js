import{g as f,a as o,i as a,t as g,u as R}from"./web-y9Kcdmxi.js";import{n as j,e as B}from"./parse-markdown-C61Y4UXr.js";import{H as D}from"./header-C6tHYnkG.js";import{C as L,c as M,g as O}from"./collection-form-CiKciYXr.js";import{u as U}from"./config-context-Bqa-_nJu.js";import{S as W}from"./showWhenResource-Cv3sTxUG.js";import{u as q,i as z,h as A}from"./sparkstone-logo-full-BMoF2ggk.js";import{b as c}from"./solid-DK4Op-bj.js";var G=g('<form><header class="flex flip"><h2 style=margin:0>New <!$><!/></h2><div style=flex-grow:1></div><button>Publish</button></header><hr><!$><!/>'),I=g("<main class=container><!$><!/><hr><!$><!/>");function te(J){const[l]=U(),u=q(),_=z();A();const t=()=>l()?.collections?.[u.collection],{formSubmit:h,errors:p,validate:b}=j();async function d(e){const n=Object.fromEntries(new FormData(e).entries()),r=M(t(),n);let s=B(t(),n);await fetch(`${O(l())}/storage/file/${r}`,{method:"put",body:s}),e.reset(),_(`/admin?collection=${t().name}`)}return(()=>{var e=f(I),n=e.firstChild,[r,s]=o(n.nextSibling),x=r.nextSibling,S=x.nextSibling,[C,v]=o(S.nextSibling);return a(e,c(D,{}),r,s),a(e,c(W,{resources:[l],get children(){var i=f(G),m=i.firstChild,$=m.firstChild,y=$.firstChild,w=y.nextSibling,[E,P]=o(w.nextSibling),N=m.nextSibling,k=N.nextSibling,[F,H]=o(k.nextSibling);return R(h,i,()=>d),a($,()=>t()?.label,E,P),a(i,c(L,{get collection(){return t()},errors:p,validate:b}),F,H),i}}),C,v),e})()}export{te as default};
